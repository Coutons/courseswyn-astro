---
const { 
  title, 
  slug, 
  image, 
  rating, 
  students, 
  price, 
  originalPrice, 
  discount, 
  instructor, 
  category, 
  subcategory,
  duration, 
  lastUpdated, 
  language = "English",
  variant = "list" 
} = Astro.props;

// Date Logic (Mock "about 1 hour ago" for freshness)
const timeAgo = "about 1 hour ago"; 

// Category Breadcrumb String
const categoryString = subcategory ? `${category} > ${subcategory}` : category;

---

<article class="flex flex-col md:flex-row bg-[#151b24] border border-[#2d3748] rounded-xl overflow-hidden hover:border-[#10b981] transition-all duration-300 group">
  
  <!-- Left: Image -->
  <div class="relative w-full md:w-72 h-48 md:h-auto flex-shrink-0">
    <img 
      src={image} 
      alt={title} 
      class="w-full h-full object-cover transition-transform duration-500 group-hover:scale-105"
      loading="lazy" 
    />
    <!-- Time Badge -->
    <div class="absolute top-3 left-3 bg-black/60 backdrop-blur-sm text-gray-200 text-xs font-medium px-2 py-1 rounded">
      {timeAgo}
    </div>
  </div>

  <!-- Right: Content -->
  <div class="flex-1 p-5 flex flex-col relative">
    
    <!-- Top Row: Title & Badge -->
    <div class="flex justify-between items-start mb-2">
       <h3 class="font-bold text-white text-lg leading-snug group-hover:text-[#10b981] transition-colors pr-12 line-clamp-2">
          <a href={`/coupon/${slug}`}>
            {title}
          </a>
       </h3>
       <span class="bg-[#10b981] text-white text-[10px] font-bold px-2 py-0.5 rounded ml-2 flex-shrink-0">
          Udemy
       </span>
    </div>

    <!-- Meta Badges Row -->
    <div class="flex flex-wrap items-center gap-2 mb-4 text-xs text-gray-400">
        <!-- Platform Icon/Text -->
        <span class="flex items-center gap-1 bg-[#1f2937] px-2 py-1 rounded border border-[#374151]">
           <svg class="w-3 h-3 text-gray-400" viewBox="0 0 24 24" fill="currentColor"><path d="M12 2L2 7l10 5 10-5-10-5zm0 9l2.5-1.25L12 8.5l-2.5 1.25L12 11zm0 2.5l-5-2.5-5 2.5L12 22l10-8.5-5-2.5-5 2.5z"/></svg>
           Udemy
        </span>

        <!-- Rating -->
        <span class="flex items-center gap-1 bg-[#1f2937] px-2 py-1 rounded border border-[#374151]">
           <span class="text-yellow-500">â˜…</span>
           <span class="text-white font-bold">{rating || "0.0"}</span>
        </span>

        <!-- Category -->
        <span class="bg-[#1f2937] px-2 py-1 rounded border border-[#374151] truncate max-w-[150px]">
           {categoryString}
        </span>

        <!-- Duration -->
        <span class="flex items-center gap-1 bg-[#1f2937] px-2 py-1 rounded border border-[#374151]">
           <svg class="w-3 h-3" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"/></svg>
           {duration || "N/A"}
        </span>

        <!-- Students -->
        <span class="flex items-center gap-1 bg-[#1f2937] px-2 py-1 rounded border border-[#374151]">
           <svg class="w-3 h-3" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 12a3 3 0 11-6 0 3 3 0 016 0z"/><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M2.458 12C3.732 7.943 7.523 5 12 5c4.478 0 8.268 2.943 9.542 7-1.274 4.057-5.064 7-9.542 7-4.477 0-8.268-2.943-9.542-7z"/></svg>
           {students || 0}
        </span>
    </div>
    
    <!-- Language -->
    <div class="mb-4">
        <span class="flex items-center gap-1 text-xs text-gray-400 bg-[#1f2937] px-2 py-1 rounded border border-[#374151] w-max">
           <svg class="w-3 h-3" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M3.055 11H5a2 2 0 012 2v1a2 2 0 002 2 2 2 0 012 2v2.945M8 3.935V5.5A2.5 2.5 0 0010.5 8h.5a2 2 0 012 2 2 2 0 104 0 2 2 0 012-2h1.064M15 20.488V18a2 2 0 012-2h3.064M21 12a9 9 0 11-18 0 9 9 0 0118 0z"/></svg>
           {language}
        </span>
    </div>

    <!-- Bottom: Price -->
    <div class="mt-auto flex justify-end items-center gap-2">
        {originalPrice && (
           <span class="text-gray-500 line-through text-sm">{originalPrice}</span>
        )}
        <span class="text-[#10b981] font-bold text-lg">{price === 0 || price === "Free" ? "$0" : `$${price}`}</span>
    </div>

  </div>
</article>
