---
// Header matching exact screenshot but branded for CoursesWyn
const activeLink = "text-white font-bold relative after:content-[''] after:absolute after:-bottom-1 after:left-0 after:w-full after:h-0.5 after:bg-green-500 after:transition-all";
const normalLink = "text-gray-300 hover:text-white font-medium text-sm transition-colors relative group after:content-[''] after:absolute after:-bottom-1 after:left-0 after:w-0 after:h-0.5 after:bg-green-500 after:transition-all hover:after:w-full";

const { pathname } = Astro.url;
const isActive = (path: string) => pathname === path || (path !== '/' && pathname.startsWith(path));
---

<header class="sticky top-0 z-50 bg-[#1c252e] py-3 border-b border-[#2d3748]">
  <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
    <div class="flex justify-between items-center h-12">
      
      <!-- Left: Logo (Rebranded) -->
      <div class="flex items-center">
        <a href="/" class="flex items-center gap-1 group">
           <span class="text-2xl font-bold text-white tracking-tight group-hover:text-gray-200 transition-colors">Courses</span>
           <span class="text-2xl font-bold text-green-500 tracking-tight group-hover:text-green-400 transition-colors">Wyn</span>
        </a>
      </div>

      <!-- Right Side: Navigation & Actions -->
      <div class="flex items-center gap-6 xl:gap-10">
        <!-- Center: Navigation -->
        <nav class="hidden lg:flex items-center gap-8">
          <a href="/udemy-coupon-code" class={isActive('/udemy-coupon-code') ? activeLink : normalLink}>
            <span class="text-green-500 mr-1">•</span>Coupon
          </a>
          <a href="/courses" class={isActive('/courses') ? activeLink : normalLink}>
            <span class="text-green-500 mr-1">•</span>Courses
          </a>
          <a href="/topics" class={isActive('/topics') ? activeLink : normalLink}>
            <span class="text-green-500 mr-1">•</span>Topics
          </a>
          <a href="/blog" class={isActive('/blog') ? activeLink : normalLink}>
            <span class="text-green-500 mr-1">•</span>Blog
          </a>
          <a href="/categories" class={isActive('/categories') ? activeLink : normalLink}>
            Categories
          </a>
        </nav>

        <div class="flex items-center gap-4">
          <!-- Promo Code Button -->
          <a href="https://trk.udemy.com/c/6564357/3775958/39854" target="_blank" rel="nofollow noopener" class="hidden lg:block px-6 py-2 bg-[#f59e0b] hover:bg-[#d97706] text-[#1a1d29] text-sm font-bold rounded-full transition-all shadow-lg hover:shadow-orange-500/40 whitespace-nowrap">
            Promo Code
          </a>

          <!-- Search Bar -->
          <div class="hidden md:flex relative w-48 lg:w-56">
               <form action="/search" method="GET" class="w-full relative group">
                  <input 
                    type="text" 
                    name="q"
                    placeholder="Search..." 
                    class="w-full bg-[#1c252e] border border-[#2d3748] rounded-full pl-9 pr-12 py-1.5 text-xs text-gray-200 placeholder-gray-500 focus:outline-none focus:border-green-500 focus:ring-1 focus:ring-green-500 transition-all"
                  />
                  <div class="absolute left-3 top-1/2 -translate-y-1/2 text-gray-500">
                      <svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"/></svg>
                  </div>
                  <div class="absolute right-2 top-1/2 -translate-y-1/2 flex items-center gap-1 px-1.5 py-0.5 bg-[#2d3748] rounded text-[10px] text-gray-400 font-mono">
                    <span>⌘</span><span>K</span>
                  </div>
               </form>
          </div>

          <!-- Settings Icon -->
          <div class="relative group">
            <button class="text-gray-400 hover:text-white p-2">
              <svg class="w-5 h-5" fill="currentColor" viewBox="0 0 20 20">
                <path fill-rule="evenodd" d="M11.49 3.17c-.38-1.56-2.6-1.56-2.98 0a1.532 1.532 0 01-2.286.948c-1.372-.836-2.942.734-2.106 2.106.54.886.061 2.042-.947 2.287-1.561.379-1.561 2.6 0 2.978a1.532 1.532 0 01.947 2.287c-.836 1.372.734 2.942 2.106 2.106a1.532 1.532 0 012.287.947c.379 1.561 2.6 1.561 2.978 0a1.533 1.533 0 012.287-.947c1.372.836 2.942-.734 2.106-2.106a1.533 1.533 0 01.947-2.287c1.561-.379 1.561-2.6 0-2.978a1.532 1.532 0 01-.947-2.287c.836-1.372-.734-2.942-2.106-2.106a1.532 1.532 0 01-2.287-.947zM10 13a3 3 0 100-6 3 3 0 000 6z" clip-rule="evenodd"/>
              </svg>
            </button>
            <div class="absolute right-0 mt-2 w-48 bg-[#1c252e] rounded-xl shadow-xl border border-[#2d3748] opacity-0 invisible group-hover:opacity-100 group-hover:visible transition-all z-50 transform origin-top-right">
               <a href="/about" class="block px-4 py-2 text-sm text-gray-300 hover:bg-[#1a1d29] hover:text-white first:rounded-t-xl">About</a>
               <a href="/terms" class="block px-4 py-2 text-sm text-gray-300 hover:bg-[#1a1d29] hover:text-white">Terms of Service</a>
               <a href="/privacy" class="block px-4 py-2 text-sm text-gray-300 hover:bg-[#1a1d29] hover:text-white">Privacy Policy</a>
               <a href="/contact-us" class="block px-4 py-2 text-sm text-gray-300 hover:bg-[#1a1d29] hover:text-white last:rounded-b-xl">Contact Us</a>
            </div>
          </div>

          <!-- Mobile Menu Button -->
          <button class="lg:hidden text-gray-300 hover:text-white" id="mobile-menu-button">
            <svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24">
              <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 6h16M4 12h16M4 18h16"/>
            </svg>
          </button>
        </div>
      </div>
    </div>
  </div>

    <!-- Mobile Menu -->
    <div class="hidden lg:hidden" id="mobile-menu">
      <nav class="pt-4 pb-4 border-t border-[#2d3748] mt-4 space-y-2">
        <a href="/courses" class="block px-4 py-3 text-gray-300 hover:text-white hover:bg-[#242938] rounded-xl font-medium">Courses</a>
        <a href="/topics" class="block px-4 py-3 text-gray-300 hover:text-white hover:bg-[#242938] rounded-xl font-medium">Topics</a>
        <a href="/categories" class="block px-4 py-3 text-gray-300 hover:text-white hover:bg-[#242938] rounded-xl font-medium">Categories</a>
        <a href="https://trk.udemy.com/c/6564357/3775958/39854" target="_blank" rel="nofollow noopener" class="block px-4 py-3 bg-[#f59e0b] text-[#1a1d29] rounded-full font-bold text-center mt-4">Promo Code</a>
      </nav>
    </div>
  </div>

  <!-- Simple Search Modal -->
  <div id="search-modal" class="hidden fixed inset-0 z-[100] bg-black/80 backdrop-blur-sm flex items-start justify-center pt-24 px-4">
    <div class="w-full max-w-2xl bg-[#1c252e] border border-[#2d3748] rounded-2xl shadow-2xl overflow-hidden relative" onclick="event.stopPropagation()">
      <div class="p-4 border-b border-[#2d3748] flex items-center gap-4">
        <div class="hidden md:flex flex-1 max-w-2xl mx-8">
          <form action="/search" method="GET" class="relative w-full group">
            <div class="absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none">
              <svg class="h-5 w-5 text-gray-500 group-focus-within:text-green-500 transition-colors" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z" />
              </svg>
            </div>
            <input 
              type="text" 
              name="q"
              placeholder="Search for Python, Java, Marketing..." 
              class="block w-full pl-10 pr-3 py-2 border border-[#2d3748] rounded-lg leading-5 bg-[#151720] text-gray-100 placeholder-gray-500 focus:outline-none focus:bg-[#1a1d29] focus:border-green-500 focus:ring-1 focus:ring-green-500 sm:text-sm transition-all duration-200"
              autofocus
            />
          </form>
        </div>
        <button onclick="document.getElementById('search-modal').classList.add('hidden')" class="text-gray-500 hover:text-white px-2 py-1 bg-[#242938] rounded text-xs font-bold">ESC</button>
      </div>
      <div class="p-4 text-center text-gray-500 text-sm">
        Type to search... press Enter to view all results.
      </div>
    </div>
    <!-- Close on click outside -->
    <div class="absolute inset-0 -z-10" onclick="document.getElementById('search-modal').classList.add('hidden')"></div>
  </div>
</header>

<script>
  // Mobile Menu Logic
  const button = document.getElementById('mobile-menu-button');
  const menu = document.getElementById('mobile-menu');
  
  button?.addEventListener('click', () => {
    menu?.classList.toggle('hidden');
  });

  // Search Logic
  const searchInput = document.getElementById('search-input');
  searchInput?.addEventListener('keydown', (e) => {
    if (e.key === 'Enter') {
      window.location.href = `/search?q=${encodeURIComponent((e.target as HTMLInputElement).value)}`;
    }
  });

  // Keyboard shortcut for search
  document.addEventListener('keydown', (e) => {
    if ((e.metaKey || e.ctrlKey) && e.key === 'k') {
      e.preventDefault();
      document.getElementById('search-modal')?.classList.remove('hidden');
      document.getElementById('search-input')?.focus();
    }
    if (e.key === 'Escape') {
      document.getElementById('search-modal')?.classList.add('hidden');
    }
  });
</script>
