---
interface Props {
  category?: string;
  subcategory?: string;
  courseTitle?: string;
  isCategoryPage?: boolean;
  isSubCategoryPage?: boolean;
}

const { category, subcategory, courseTitle, isCategoryPage, isSubCategoryPage } = Astro.props;
---

<nav aria-label="Breadcrumb" class="mx-auto max-w-6xl px-4 py-4 border-b border-slate-700">
  <ol class="flex items-center gap-2 text-sm">
    <li>
      <a href="/" class="hover:text-blue-400 transition-colors font-medium text-slate-300">
        Home
      </a>
    </li>
    <li class="text-slate-500">/</li>
    <li>
      <a href="/coupon/" class="hover:text-blue-400 transition-colors font-medium text-slate-300">
        Coupons
      </a>
    </li>
    {category && (
      <>
        <li class="text-slate-500">/</li>
        <li>
          {isCategoryPage ? (
            <span class="font-medium text-slate-100">
              {category.replace(/-/g, " ")}
            </span>
          ) : (
            <a
              href={`/coupon/${category.toLowerCase().replace(/\s+/g, '-')}/`}
              class="hover:text-blue-400 transition-colors font-medium text-slate-300"
            >
              {category.replace(/-/g, " ")}
            </a>
          )}
        </li>
      </>
    )}
    {subcategory && (
      <>
        <li class="text-slate-500">/</li>
        <li>
          {isSubCategoryPage ? (
            <span class="font-medium text-slate-100">
              {subcategory}
            </span>
          ) : (
            <a
              href={`/coupon/${category!.toLowerCase().replace(/\s+/g, '-')}/${subcategory.toLowerCase().replace(/\s+/g, '-').replace(/&/g, 'and').replace(/\//g, '-')}`}
              class="hover:text-blue-400 transition-colors font-medium text-slate-300"
            >
              {subcategory}
            </a>
          )}
        </li>
      </>
    )}
    {courseTitle && (
      <>
        <li class="text-slate-500">/</li>
        <li>
          <span class="font-medium text-slate-100">
            {courseTitle}
          </span>
        </li>
      </>
    )}
  </ol>
</nav>

<!-- Schema Markup -->
{category || subcategory ? (
  <script type="application/ld+json" set:html={
    JSON.stringify({
      "@context": "https://schema.org",
      "@type": "BreadcrumbList",
      "itemListElement": [
        {
          "@type": "ListItem",
          "position": 1,
          "name": "Home",
          "item": "https://courseswyn.com/"
        },
        {
          "@type": "ListItem",
          "position": 2,
          "name": "Coupons",
          "item": "https://courseswyn.com/coupon/"
        },
        ...(category ? [{
          "@type": "ListItem",
          "position": 3,
          "name": category.replace(/-/g, " "),
          "item": `https://courseswyn.com/coupon/${category.toLowerCase().replace(/\s+/g, '-')}/`
        }] : []),
        ...(subcategory && category ? [{
          "@type": "ListItem",
          "position": 4,
          "name": subcategory,
          "item": `https://courseswyn.com/coupon/${category.toLowerCase().replace(/\s+/g, '-')}/${subcategory.toLowerCase().replace(/\s+/g, '-').replace(/&/g, 'and').replace(/\//g, '-')}/`
        }] : []),
        ...(courseTitle ? [{
          "@type": "ListItem",
          "position": subcategory ? (category ? 5 : 4) : (category ? 4 : 3),
          "name": courseTitle,
          "item": `https://courseswyn.com/coupon/${courseTitle.toLowerCase().replace(/\s+/g, '-')}`
        }] : [])
      ]
    })
  } />
) : null}
