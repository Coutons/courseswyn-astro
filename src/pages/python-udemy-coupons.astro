---
import MainLayout from "../layouts/MainLayout.astro";
import coupons from "../data/coupons.json";
import DealCard from "../components/coupon/DealCard.astro";

// Get Python courses from coupons data
const pythonCourses = coupons.filter((coupon: any) => {
  const categoryLower = coupon.category?.toLowerCase() || '';
  const subcategoryLower = coupon.subcategory?.toLowerCase() || '';
  const titleLower = coupon.title?.toLowerCase() || '';
  const descriptionLower = coupon.description?.toLowerCase() || '';
  
  // Filter for Python-related courses
  return categoryLower.includes('python') || 
         subcategoryLower.includes('python') ||
         titleLower.includes('python') ||
         descriptionLower.includes('python') ||
         categoryLower.includes('it & software') ||
         subcategoryLower.includes('it & software');
}).sort((a: any, b: any) => {
  // Sort by students (descending) then rating (descending)
  const studentsDiff = ((b as any).students || 0) - ((a as any).students || 0);
  if (studentsDiff !== 0) return studentsDiff;
  
  const ratingDiff = ((b as any).rating || 0) - ((a as any).rating || 0);
  return ratingDiff;
});

// Dynamic freshness stats
const today = new Date();
const thisWeek = pythonCourses.filter((coupon: any) => {
  const couponDate = new Date(coupon.createdAt || coupon.date);
  const daysDiff = Math.floor((today.getTime() - couponDate.getTime()) / (1000 * 60 * 60 * 24));
  return daysDiff <= 7;
}).length;

const expiringSoon = pythonCourses.filter((coupon: any) => {
  if (!coupon.expiresAt) return false;
  const expiryDate = new Date(coupon.expiresAt);
  const daysDiff = Math.floor((expiryDate.getTime() - today.getTime()) / (1000 * 60 * 60 * 24));
  return daysDiff <= 1 && daysDiff >= 0;
}).length;

// SEO data
const pageTitle = `Python Udemy Coupons - Free Python Courses 2026 | CoursesWyn`;
const pageDescription = `Get ${pythonCourses.length}+ verified Python Udemy coupons and free courses. Learn Python programming, Django, Flask, data science, and machine learning with 100% off coupons.`;

// SEO-optimized Course Schema with mainEntityOfPage
const pythonSchema = {
  "@context": "https://schema.org",
  "@type": "CollectionPage",
  "name": "Python Udemy Coupons",
  "description": pageDescription,
  "url": "https://courseswyn.com/python-udemy-coupons/",
  "mainEntityOfPage": {
    "@type": "CollectionPage",
    "name": "Python Udemy Coupons",
    "description": pageDescription,
    "url": "https://courseswyn.com/python-udemy-coupons/"
  },
  "about": {
    "@type": "Thing",
    "name": "Python Programming"
  },
  "mainEntity": {
    "@type": "ItemList",
    "name": "Python Courses",
    "description": pageDescription,
    "numberOfItems": pythonCourses.length,
    "itemListElement": pythonCourses.map((course: any, index: number) => ({
      "@type": "Course",
      "position": index + 1,
      "name": course.title,
      "description": course.description,
      "provider": {
        "@type": "Organization",
        "name": course.provider
      },
      "offers": {
        "@type": "Offer",
        "price": course.price === 0 ? "Free" : `$${course.price}`,
        "priceCurrency": "USD",
        "availability": "https://schema.org/InStock",
        "validFrom": course.createdAt,
        "url": `https://courseswyn.com/coupon/${course.slug}`
      }
    }))
  }
};

// FAQ Schema
const faqSchema = {
  "@context": "https://schema.org",
  "@type": "FAQPage",
  "mainEntity": [
    {
      "@type": "Question",
      "name": "Is Python good for beginners?",
      "acceptedAnswer": {
        "@type": "Answer",
        "text": "Yes! Python is one of the best programming languages for beginners due to its simple syntax, readability, and extensive community support. Many Python courses start with programming fundamentals and gradually progress to advanced topics."
      }
    },
    {
      "@type": "Question",
      "name": "Can I get a job with Python?",
      "acceptedAnswer": {
        "@type": "Answer",
        "text": "Absolutely! Python skills are in high demand across industries. Common job roles include Python developer, data scientist, machine learning engineer, DevOps engineer, and automation specialist. The average Python developer salary ranges from $80,000 to $150,000+ depending on experience and location."
      }
    },
    {
      "@type": "Question",
      "name": "How long does it take to learn Python?",
      "acceptedAnswer": {
        "@type": "Answer",
        "text": "With consistent practice, you can learn Python basics in 2-3 months. Intermediate skills typically take 6-12 months, while advanced proficiency may require 1-2 years of dedicated learning and project work."
      }
    },
    {
      "@type": "Question",
      "name": "Are these Python courses with certificates?",
      "acceptedAnswer": {
        "@type": "Answer",
        "text": "Yes! All Python courses listed here provide completion certificates from Udemy. These certificates can be added to your resume and LinkedIn profile to showcase your Python programming skills to potential employers."
      }
    }
  ]
};
---

<MainLayout 
  title={pageTitle}
  description={pageDescription}
  canonical="https://courseswyn.com/python-udemy-coupons/"
  ogImage="https://courseswyn.com/og-python-coupons.jpg"
  structuredData={pythonSchema}
>

  <!-- FAQ Schema -->
  <script is:inline type="application/ld+json" set:html={JSON.stringify(faqSchema)} />

  <!-- Breadcrumb Navigation -->
  <nav aria-label="Breadcrumb" class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-4">
    <ol class="flex items-center space-x-2 text-sm text-muted-foreground">
      <li>
        <a href="/" class="hover:text-foreground transition-colors">Home</a>
      </li>
      <li>
        <a href="/coupon" class="hover:text-foreground transition-colors">Coupons</a>
      </li>
      <li aria-current="page" class="text-foreground font-medium">Python Courses</li>
    </ol>
  </nav>

  <!-- Python Category Header -->
  <section class="py-16 bg-card">
    <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
      <div class="text-center">
        <div class="w-20 h-20 bg-gradient-to-br from-blue-500/20 to-cyan-500/20 rounded-3xl flex items-center justify-center text-5xl mx-auto mb-6">
          üêç
        </div>
        <h1 class="text-4xl font-bold text-foreground mb-4">
          Python Udemy Coupons
        </h1>
        <p class="text-xl text-muted-foreground max-w-3xl mx-auto mb-8">
          Get {pythonCourses.length}+ verified Python Udemy coupons and free courses. 
          Master Python programming, Django, Flask, data science, and machine learning with 100% off coupons.
        </p>
        
        <!-- Dynamic Freshness Stats -->
        <div class="flex items-center justify-center gap-6 text-sm mb-8">
          <div class="flex items-center gap-2">
            <span class="w-2 h-2 bg-green-500 rounded-full animate-pulse"></span>
            <span class="text-foreground font-medium">{pythonCourses.length}+ Python Courses</span>
          </div>
          <div class="flex items-center gap-2">
            <span class="w-2 h-2 bg-blue-500 rounded-full"></span>
            <span class="text-foreground font-medium">{thisWeek} verified this week</span>
          </div>
          <div class="flex items-center gap-2">
            <span class="w-2 h-2 bg-orange-500 rounded-full"></span>
            <span class="text-foreground font-medium">{expiringSoon} expiring in 24h</span>
          </div>
          <div class="flex items-center gap-2">
            <span class="w-2 h-2 bg-purple-500 rounded-full"></span>
            <span class="text-foreground font-medium">Updated {today.toLocaleDateString('en-US', { month: 'long', year: 'numeric' })}</span>
          </div>
        </div>
      </div>
    </div>
  </section>

  <!-- Mini-Index Table (Semantic Reinforcement) -->
  <section class="py-8 bg-background">
    <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
      <div class="max-w-4xl mx-auto">
        <div class="bg-card rounded-lg p-6 border border-border">
          <h3 class="text-lg font-semibold text-foreground mb-4">Python Topics Available</h3>
          <div class="grid grid-cols-2 md:grid-cols-4 gap-4 text-sm">
            <div class="flex justify-between items-center p-3 bg-muted/50 rounded-lg">
              <span class="text-muted-foreground">Python Basics</span>
              <span class="text-foreground font-medium">{pythonCourses.filter(c => c.title?.toLowerCase().includes('python') && c.title?.toLowerCase().includes('basic')).length || 0}</span>
            </div>
            <div class="flex justify-between items-center p-3 bg-muted/50 rounded-lg">
              <span class="text-muted-foreground">Django</span>
              <span class="text-foreground font-medium">{pythonCourses.filter(c => c.title?.toLowerCase().includes('django')).length || 0}</span>
            </div>
            <div class="flex justify-between items-center p-3 bg-muted/50 rounded-lg">
              <span class="text-muted-foreground">Flask</span>
              <span class="text-foreground font-medium">{pythonCourses.filter(c => c.title?.toLowerCase().includes('flask')).length || 0}</span>
            </div>
            <div class="flex justify-between items-center p-3 bg-muted/50 rounded-lg">
              <span class="text-muted-foreground">Machine Learning</span>
              <span class="text-foreground font-medium">{pythonCourses.filter(c => c.title?.toLowerCase().includes('machine learning')).length || 0}</span>
            </div>
          </div>
        </div>
      </div>
    </div>
  </section>

  <!-- Python Courses Grid (70% Listing Priority) -->
  <section class="py-16 bg-card">
    <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
      <div class="text-center mb-12">
        <h2 class="text-3xl font-bold text-foreground mb-4">
          Active Python Coupons
        </h2>
        <p class="text-lg text-muted-foreground max-w-3xl mx-auto">
          Verified Python courses with 100% off Udemy coupons
        </p>
      </div>
      
      {pythonCourses.length > 0 ? (
        <div class="grid sm:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-4">
          {pythonCourses.map((course: any) => (
            <DealCard {...course} variant="compact" />
          ))}
        </div>
      ) : (
        <div class="text-center py-12">
          <div class="bg-muted/30 rounded-lg p-8 max-w-md mx-auto">
            <svg class="w-16 h-16 text-muted-foreground mx-auto mb-4" fill="none" stroke="currentColor" viewBox="0 0 24 24">
              <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"></path>
            </svg>
            <h3 class="text-xl font-semibold text-foreground mb-2">No Python Courses Found</h3>
            <p class="text-muted-foreground">
              Check back soon for new Python courses with Udemy coupons.
            </p>
          </div>
        </div>
      )}
    </div>
  </section>

  <!-- Popular This Month Section (Behavioral Signal) -->
  <section class="py-16 bg-background">
    <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
      <div class="text-center mb-12">
        <h2 class="text-3xl font-bold text-foreground mb-4">
          Popular Python Courses This Month
        </h2>
        <p class="text-lg text-muted-foreground max-w-3xl mx-auto">
          Most claimed and highest-rated Python courses
        </p>
      </div>
      
      <div class="grid sm:grid-cols-2 lg:grid-cols-3 gap-6 max-w-5xl mx-auto">
        {pythonCourses.slice(0, 6).map((course: any) => (
          <div class="bg-card rounded-lg p-6 border border-border hover:shadow-lg transition-all">
            <div class="flex items-center gap-3 mb-4">
              <div class="w-12 h-12 bg-gradient-to-br from-blue-500/20 to-cyan-500/20 rounded-lg flex items-center justify-center text-2xl">
                üêç
              </div>
              <div>
                <h3 class="text-lg font-semibold text-foreground mb-1">{course.title}</h3>
                <div class="flex items-center gap-2 text-sm text-muted-foreground">
                  <span class="text-yellow-500">‚òÖ {course.rating || "5.0"}</span>
                  <span>‚Ä¢</span>
                  <span>{course.students ? (course.students >= 1000 ? `${Math.floor(course.students / 1000)}k+` : `${course.students}`) : "NEW"}</span>
                </div>
              </div>
            </div>
            <a href={`/coupon/${course.slug}/`} class="block w-full bg-primary hover:bg-primary/90 text-white font-black uppercase tracking-widest transition-all rounded-lg py-3 text-center">
              Get Course
            </a>
          </div>
        ))}
      </div>
    </div>
  </section>

  <!-- Compact Authority Content (30% Authority) -->
  <section class="py-16 bg-background">
    <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
      <div class="max-w-4xl mx-auto">
        <div class="prose prose-lg max-w-none text-muted-foreground leading-relaxed space-y-6">
          <h2 class="text-3xl font-semibold text-foreground mb-4">Why Learn Python with Udemy Coupons?</h2>
          
          <p>
            <strong class="text-foreground">Python programming</strong> has become one of the most sought-after skills in today's tech industry. 
            With <strong class="text-foreground">free Python courses</strong> from Udemy, you can master this versatile language without 
            breaking the bank. Python powers everything from web development and data science to artificial intelligence 
            and automation, making it an essential skill for developers and data professionals.
          </p>
          
          <h3 class="text-2xl font-semibold text-foreground mb-4 mt-8">Python Career Opportunities</h3>
          
          <p>
            Learning Python opens doors to numerous high-paying career paths. <strong class="text-foreground">Python developers</strong> 
            are in high demand for roles in web development, data science, machine learning, DevOps, and automation. 
            The average Python developer salary ranges from <strong class="text-foreground">$80,000 to $150,000+</strong> depending on experience and location.
          </p>
          
          <div class="bg-blue-500/10 rounded-xl p-6 border border-blue-500/20 mt-8">
            <h4 class="text-lg font-semibold text-foreground mb-4">Python Learning Path</h4>
            <div class="space-y-3 text-sm">
              <div class="flex items-start gap-3">
                <span class="text-blue-500 mt-1">üéØ</span>
                <div>
                  <strong class="text-foreground">Beginner:</strong> Python basics, syntax, and programming concepts
                </div>
              </div>
              <div class="flex items-start gap-3">
                <span class="text-blue-500 mt-1">üöÄ</span>
                <div>
                  <strong class="text-foreground">Intermediate:</strong> Web frameworks, data analysis, and automation
                </div>
              </div>
              <div class="flex items-start gap-3">
                <span class="text-blue-500 mt-1">üèÜ</span>
                <div>
                  <strong class="text-foreground">Advanced:</strong> Machine learning, AI, and enterprise applications
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>
  </section>

  <!-- FAQ Section (Optimized for Long-Tail) -->
  <section class="py-16 bg-card">
    <div class="max-w-4xl mx-auto px-4 sm:px-6 lg:px-8">
      <div class="text-center mb-12">
        <h2 class="text-3xl font-bold text-foreground mb-4">
          Python Learning FAQ
        </h2>
        <p class="text-lg text-muted-foreground">
          Common questions about learning Python with Udemy coupons
        </p>
      </div>
      
      <div class="space-y-6">
        <div class="bg-card rounded-lg p-6 border border-border">
          <h3 class="text-lg font-semibold text-foreground mb-3">
            Is Python good for beginners?
          </h3>
          <p class="text-muted-foreground">
            Yes! Python is one of the best programming languages for beginners due to its simple syntax, 
            readability, and extensive community support. Many Python courses start with programming fundamentals 
            and gradually progress to advanced topics.
          </p>
        </div>
        
        <div class="bg-card rounded-lg p-6 border border-border">
          <h3 class="text-lg font-semibold text-foreground mb-3">
            Can I get a job with Python?
          </h3>
          <p class="text-muted-foreground">
            Absolutely! Python skills are in high demand across industries. Common job roles include Python developer, 
            data scientist, machine learning engineer, DevOps engineer, and automation specialist. 
            The average Python developer salary ranges from $80,000 to $150,000+ depending on experience and location.
          </p>
        </div>
        
        <div class="bg-card rounded-lg p-6 border border-border">
          <h3 class="text-lg font-semibold text-foreground mb-3">
            How long does it take to learn Python?
          </h3>
          <p class="text-muted-foreground">
            With consistent practice, you can learn Python basics in 2-3 months. Intermediate skills typically take 6-12 months, 
            while advanced proficiency may require 1-2 years of dedicated learning and project work.
          </p>
        </div>
        
        <div class="bg-card rounded-lg p-6 border border-border">
          <h3 class="text-lg font-semibold text-foreground mb-3">
            Are these Python courses with certificates?
          </h3>
          <p class="text-muted-foreground">
            Yes! All Python courses listed here provide completion certificates from Udemy. These certificates can be 
            added to your resume and LinkedIn profile to showcase your Python programming skills to potential employers.
          </p>
        </div>
      </div>
    </div>
  </section>

  <!-- Minimal Related Categories (Strategic Cross-Link) -->
  <section class="py-16 bg-background">
    <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
      <div class="text-center mb-8">
        <h2 class="text-2xl font-bold text-foreground mb-4">
          Related Programming Topics
        </h2>
      </div>
      
      <div class="grid md:grid-cols-3 gap-6 max-w-4xl mx-auto">
        <a href="/web-development-udemy-coupons/" class="group">
          <div class="bg-card rounded-lg p-6 border border-border hover:shadow-lg transition-all">
            <div class="w-12 h-12 bg-gradient-to-br from-orange-500/20 to-red-500/20 rounded-lg flex items-center justify-center text-2xl mb-4 group-hover:scale-110 transition-transform">
              ‚öõÔ∏è
            </div>
            <h3 class="text-lg font-semibold text-foreground mb-2 group-hover:text-primary transition-colors">
              Web Development
            </h3>
            <p class="text-muted-foreground text-sm">
              HTML, CSS, JavaScript, React, and modern web frameworks
            </p>
          </div>
        </a>
        
        <a href="/data-science-udemy-coupons/" class="group">
          <div class="bg-card rounded-lg p-6 border border-border hover:shadow-lg transition-all">
            <div class="w-12 h-12 bg-gradient-to-br from-green-500/20 to-blue-500/20 rounded-lg flex items-center justify-center text-2xl mb-4 group-hover:scale-110 transition-transform">
              üìä
            </div>
            <h3 class="text-lg font-semibold text-foreground mb-2 group-hover:text-primary transition-colors">
              Data Science
            </h3>
            <p class="text-muted-foreground text-sm">
              Data analysis, machine learning, and big data technologies
            </p>
          </div>
        </a>
        
        <a href="/category/it-and-software/" class="group">
          <div class="bg-card rounded-lg p-6 border border-border hover:shadow-lg transition-all">
            <div class="w-12 h-12 bg-gradient-to-br from-purple-500/20 to-pink-500/20 rounded-lg flex items-center justify-center text-2xl mb-4 group-hover:scale-110 transition-transform">
              üíª
            </div>
            <h3 class="text-lg font-semibold text-foreground mb-2 group-hover:text-primary transition-colors">
              IT & Software
            </h3>
            <p class="text-muted-foreground text-sm">
              System administration, cybersecurity, and software engineering
            </p>
          </div>
        </a>
      </div>
    </div>
  </section>

</MainLayout>
