---
import MainLayout from '../layouts/MainLayout.astro';
import CategoryCard from '../components/category/CategoryCard.astro';
import coupons from '../data/coupons.json';

// Get and process category data
const categoryData = [...new Set(coupons.map(c => c.category))].sort().map(category => {
  const categoryCoupons = coupons.filter(c => c.category === category);
  const subcategories = [...new Set(categoryCoupons.map(c => c.subcategory))].filter(Boolean).sort() as string[];
  
  return {
    name: category,
    courseCount: categoryCoupons.length,
    subcategories
  };
});

const faqs = [
  {
    question: "How many course categories do you have?",
    answer: "We currently have 13 main categories covering various subjects from programming and design to business and marketing. Each category contains multiple subcategories for more specific topics."
  },
  {
    question: "What are the most popular categories?",
    answer: "Our most popular categories include Programming & Development, Web Design, Business & Entrepreneurship, Digital Marketing, Data Science, and Graphic Design. Each category offers hundreds of free courses."
  },
  {
    question: "How do I find courses in a specific category?",
    answer: "Click on any category card above to browse courses in that subject area. You can also use the search function on our homepage to find specific courses by keywords."
  },
  {
    question: "Are all courses in these categories free?",
    answer: "Yes! All courses listed in our categories are available for free using our exclusive coupon codes. No hidden fees or subscriptions required."
  }
];

// Structured Data: ItemList for categories
const itemListSchema = {
  "@context": "https://schema.org",
  "@type": "ItemList",
  "itemListElement": categoryData.map((data, index) => ({
    "@type": "ListItem",
    "position": index + 1,
    "name": data.name,
    "url": `https://courseswyn.com/courses/category/${data.name}`
  }))
};

// Structured Data: FAQPage
const faqSchema = {
  "@context": "https://schema.org",
  "@type": "FAQPage",
  "mainEntity": faqs.map(faq => ({
    "@type": "Question",
    "name": faq.question,
    "acceptedAnswer": {
      "@type": "Answer",
      "text": faq.answer
    }
  }))
};

const combinedSchema = [itemListSchema, faqSchema];

const pageTitle = "Free Udemy Course Categories - Browse Courses by Subject | CoursesWyn";
const pageDescription = "Explore thousands of 100% OFF free Udemy courses organized by category. Verified daily: Development, Business, Design, Marketing, and more. Get your free certification today!";
---

<MainLayout 
  title={pageTitle} 
  description={pageDescription}
  structuredData={combinedSchema}
  ogTitle="Browse Free Udemy Course Categories - 100% OFF Coupons"
  ogDescription="Stop paying for courses! Explore 13+ categories and thousands of premium Udemy courses for free with our daily updated coupons."
>
  <div class="bg-[#0b0e14] min-h-screen pb-20">
    <!-- Header Section -->
    <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 pt-24 pb-16">
      <div class="text-center">
        <h1 class="text-5xl md:text-6xl font-extrabold text-[#98a3f8] mb-6 tracking-tight">
          Free Udemy Course Categories
        </h1>
        <p class="text-2xl md:text-3xl text-gray-300 font-medium mb-8">
          Explore Thousands of Free Courses Organized by Subject
        </p>
        <p class="text-lg text-gray-500 max-w-4xl mx-auto leading-relaxed">
          Discover premium Udemy courses completely free! Browse by category to find exactly what you want to learn. From programming and design to business and marketing - we have {categoryData.length}+ categories with thousands of free courses.
        </p>
      </div>
    </div>

    <!-- Categories Grid -->
    <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 mb-32">
      <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6">
        {categoryData.map((data) => (
          <CategoryCard 
            category={data.name} 
            subcategories={data.subcategories} 
            courseCount={data.courseCount} 
          />
        ))}
      </div>
    </div>

    <!-- FAQ Section -->
    <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 border-t border-[#2d3748] pt-24">
      <div class="text-center mb-16">
        <h2 class="text-3xl font-bold text-white mb-4">Frequently Asked Questions</h2>
      </div>
      
      <div class="grid grid-cols-1 md:grid-cols-2 gap-8">
        {faqs.map((faq) => (
          <div class="bg-[#151720] border border-[#2d3748] p-8 rounded-2xl">
            <h3 class="text-[#059669] text-xl font-bold mb-4">
              {faq.question}
            </h3>
            <p class="text-gray-400 leading-relaxed">
              {faq.answer}
            </p>
          </div>
        ))}
      </div>
    </div>
  </div>
</MainLayout>
