---
import Layout from "../../layouts/Layout.astro";
import Breadcrumb from "../../components/Breadcrumb.astro";
import DealCard from "../../components/coupon/DealCard.astro";
import courses from "../../data/coupons.json";
import { fetchPosts } from "../../lib/posts";

export async function getStaticPaths() {
  // 1. Individual Course Paths
  const coursePaths = courses.map((course) => ({
    params: { slug: course.slug },
    props: { type: "course", course },
  }));

  // 2. Category Paths (e.g., "development-courses")
  const categories = [...new Set(courses.map((c) => c.category))];
  const categoryPaths = categories.map((cat) => {
    const slug = cat.toLowerCase().replace(/[^a-z0-9]+/g, "-") + "-courses";
    const categoryCourses = courses.filter((c) => c.category === cat);
    return {
      params: { slug },
      props: { type: "category", name: cat, courses: categoryCourses, slug },
    };
  });

  // 3. SubCategory Paths (e.g., "ai-machine-learning-courses")
  const subCategories = [
    ...new Set(courses.map((c) => c.subCategory).filter(Boolean)),
  ];
  const subCategoryPaths = subCategories.map((sub) => {
    const slug = sub.toLowerCase().replace(/[^a-z0-9]+/g, "-") + "-courses";
    const subCourses = courses.filter((c) => c.subCategory === sub);
    return {
      params: { slug },
      props: { type: "category", name: sub, courses: subCourses, slug },
    };
  });

  // 4. Special Alias: "ai-courses" (Aggregates all AI related)
  const aiCourses = courses.filter(
    (c) =>
      (c.subCategory && c.subCategory.includes("AI")) ||
      c.title.includes("AI ") ||
      c.category === "Data Science"
  );
  const aiPath = {
    params: { slug: "ai-courses" },
    props: {
        type: "category",
        name: "Artificial Intelligence (AI)",
        courses: aiCourses,
        slug: "ai-courses"
    }
  };

  return [...coursePaths, ...categoryPaths, ...subCategoryPaths, aiPath];
}

const { type, course, name, courses: catCourses, slug } = Astro.props;

// --- SHARED HELPERS ---
const currentYear = new Date().getFullYear();
const currentMonthYear = new Date().toLocaleDateString("en-US", {
  month: "long",
  year: "numeric",
});

// --- COURSE LOGIC ---
const extractKeySkill = (description) => {
  const desc = (description || "").toLowerCase();
  if (desc.includes("hacking") || desc.includes("penetration"))
    return "ethical hacking & cybersecurity";
  if (desc.includes("python")) return "Python programming";
  if (desc.includes("javascript") || desc.includes("react"))
    return "JavaScript development";
  if (desc.includes("java")) return "Java development";
  if (desc.includes("data science") || desc.includes("machine learning"))
    return "data science & AI";
  if (desc.includes("web development")) return "full-stack web development";
  return course?.category || "Online Course";
};

let title, description, canonical, structuredData, whatYouLearn, benefits, similarCourses, sampleTestimonials;

if (type === "course") {
  canonical = `https://courseswyn.com/coupon/${course.slug}/`;
  title = `[Udemy Coupon] ${course.title}`;
  description = `Get ${course.title} FREE with ${course.discount} OFF! ${course.rating} rated by ${course.students.toLocaleString()}+ students. Master ${extractKeySkill(course.description)} with lifetime access.`;

  structuredData = {
    "@context": "https://schema.org",
    "@graph": [
      {
        "@type": "Course",
        name: course.title,
        description: course.description,
        educationalLevel: course.level || "Beginner to Advanced",
        teaches: extractKeySkill(course.description),
        timeRequired: course.duration
          ? `PT${course.duration.replace(" hours", "H").replace(" mins", "M")}`
          : undefined,
        isAccessibleForFree: true,
        provider: {
          "@type": "Organization",
          name: "Udemy",
          url: "https://www.udemy.com",
        },
        offers: {
          "@type": "Offer",
          price: parseFloat(course.price.replace("$", "")),
          priceCurrency: "USD",
          url: canonical,
          availability: "https://schema.org/InStock",
          validFrom: new Date().toISOString(),
        },
        hasCourseInstance: {
          "@type": "CourseInstance",
          courseMode: "online",
          instructor: { "@type": "Person", name: course.instructor },
          courseWorkload: course.duration,
        },
        aggregateRating: {
          "@type": "AggregateRating",
          ratingValue: parseFloat(String(course.rating)),
          reviewCount: course.students,
          bestRating: 5,
          worstRating: 1,
        },
        publisher: {
          "@type": "Organization",
          name: "CoursesWyn",
          url: "https://courseswyn.com",
          logo: {
            "@type": "ImageObject",
            url: "https://courseswyn.com/logo.png",
          },
        },
      },
      {
        "@type": "BreadcrumbList",
        itemListElement: [
          {
            "@type": "ListItem",
            position: 1,
            name: "Home",
            item: "https://courseswyn.com/",
          },
          {
            "@type": "ListItem",
            position: 2,
            name: "Coupons",
            item: "https://courseswyn.com/coupon/",
          },
          {
            "@type": "ListItem",
            position: 3,
            name: course.title,
            item: canonical,
          },
        ],
      },
    ],
  };

  whatYouLearn = [
    `Master essential ${course.category} concepts from scratch`,
    "Build real-world projects to strengthen your portfolio",
    "Understand industry-standard best practices",
    `Gain proficiency in ${extractKeySkill(course.description)}`,
    "Earn a certificate of completion from Udemy",
  ];

  similarCourses = courses
    .filter((c) => c.category === course.category && c.slug !== course.slug)
    .slice(0, 4);

  sampleTestimonials = [
    {
      name: "Michael Chen",
      rating: 5,
      text: `This ${course.title} course was exactly what I needed. The instructor explains complex ${course.category} concepts clearly. Highly recommended!`,
    },
    {
      name: "Sarah Johnson",
      rating: 5,
      text: `I've taken many Udemy courses on ${extractKeySkill(course.description)}, but this one stands out. The practical examples helped me land a job.`,
    },
    {
      name: "David Smith",
      rating: 4,
      text: `Great value for money, especially with the 100% off coupon. The section on ${course.subCategory || course.category} was particularly helpful.`,
    },
    {
      name: "Emily Davis",
      rating: 5,
      text: `Excellent structure and pacing. I went from zero to hero in ${course.category} thanks to this course. Lifetime access is a huge plus.`,
    },
  ].slice(0, 4);

  benefits = [
    `Boost your career in ${course.category} with in-demand skills`,
    "Build a professional portfolio to show potential employers",
    "Get certified and validate your expertise on LinkedIn",
    `Master ${extractKeySkill(course.description)} with hands-on practice`,
  ];
} else {
    // --- CATEGORY LOGIC ---
    canonical = `https://courseswyn.com/coupon/${slug}/`;
    title = `Top ${name} Courses & Coupons - Free Udemy Deals (${currentYear})`;
    description = `Browse the best verified ${name} courses with 100% OFF coupons. Learn ${name} from top-rated instructors for free. Updated ${currentMonthYear}.`;
    
    // Schema for CollectionPage
    structuredData = {
        "@context": "https://schema.org",
        "@type": "CollectionPage",
        name: title,
        description: description,
        url: canonical,
         breadcrumb: {
          "@type": "BreadcrumbList",
          itemListElement: [
            { "@type": "ListItem", position: 1, name: "Home", item: "https://courseswyn.com/" },
            { "@type": "ListItem", position: 2, name: "Coupons", item: "https://courseswyn.com/coupon/" },
            { "@type": "ListItem", position: 3, name: name, item: canonical },
          ],
        },
    };
}
---

{type === "course" ? (
<Layout
  title={title}
  description={description}
  canonical={canonical}
  ogImage={course.image}
  structuredData={structuredData}
>
  <div class="bg-slate-950 min-h-screen pb-24 md:pb-12 font-sans">
    <!-- Top Bar Navigation (Breadcrumb) -->
    <div class="bg-slate-900 border-b border-slate-800">
      <div class="max-w-7xl mx-auto px-4 py-3">
        <Breadcrumb
          category={course.category}
          subCategory={course.subCategory}
          courseTitle={course.title}
        />
      </div>
    </div>

    <div class="max-w-7xl mx-auto px-4 py-8">
      <div class="grid grid-cols-1 lg:grid-cols-12 gap-8">
        <!-- LEFT CONTENT COLUMN (8/12) -->
        <div class="lg:col-span-8 space-y-8">
          <!-- Modern HERO Section -->
          <div
            class="bg-gradient-to-br from-slate-900 to-slate-800 rounded-3xl p-6 sm:p-8 border border-slate-700 shadow-2xl relative overflow-hidden group"
          >
            <div
              class="absolute top-0 right-0 w-64 h-64 bg-blue-600/10 rounded-full blur-3xl -translate-y-1/2 translate-x-1/2 group-hover:bg-blue-600/20 transition-all duration-700"
            >
            </div>

            <div
              class="flex flex-col md:flex-row gap-6 items-start relative z-10"
            >
              <div class="w-full md:w-1/3 flex-shrink-0">
                <img
                  src={course.image}
                  alt={course.title}
                  class="w-full rounded-2xl shadow-lg border border-slate-600/50 aspect-video object-cover"
                />
              </div>
              <div class="flex-1">
                <div class="flex flex-wrap gap-2 mb-3">
                  <span
                    class="bg-blue-600/20 text-blue-300 text-xs font-bold px-3 py-1 rounded-full border border-blue-500/30 uppercase tracking-wider"
                    >{course.category}</span
                  >
                  {
                    course.subCategory && (
                      <span class="bg-purple-600/20 text-purple-300 text-xs font-bold px-3 py-1 rounded-full border border-purple-500/30 uppercase tracking-wider">
                        {course.subCategory}
                      </span>
                    )
                  }
                </div>
                <h1
                  class="text-2xl sm:text-3xl font-black text-white mb-3 leading-tight"
                >
                  {course.title}
                </h1>
                <p class="text-slate-400 text-sm sm:text-base mb-4">
                  {course.description}
                </p>

                <div
                  class="flex flex-wrap items-center gap-4 text-sm font-medium text-slate-300"
                >
                  <div class="flex items-center gap-1 text-yellow-400">
                    <span class="text-lg">‚òÖ</span>
                    <span>{course.rating}</span>
                    <span class="text-slate-500"
                      >({course.students.toLocaleString()} students)</span
                    >
                  </div>
                  <div class="flex items-center gap-1">
                    <span>üë§</span>
                    <span>{course.instructor}</span>
                  </div>
                  <div class="flex items-center gap-1">
                    <span>üìÖ</span>
                    <span class="sr-only">Last updated on</span>
                     <time datetime={new Date(course.addedDate).toISOString()}>
                      Updated {new Date(course.addedDate).toLocaleDateString()}
                    </time>
                  </div>
                </div>
              </div>
            </div>
          </div>

          <!-- What You'll Learn (High Priority & Semantic) -->
          <div
             class="bg-slate-900/50 border border-slate-800 rounded-2xl p-6 sm:p-8"
           >
             <h2
               class="text-xl font-bold text-white mb-6 flex items-center gap-2"
             >
               <span class="bg-green-500/10 text-green-400 p-2 rounded-lg"
                 >‚ö°</span
               > What You'll Learn
             </h2>
             <p class="text-slate-400 mb-4 text-sm leading-relaxed">
               By enrolling in <strong>{course.title}</strong>, you will master the following skills and concepts designed to enhance your expertise in {course.category}:
             </p>
             <ul class="grid sm:grid-cols-2 gap-4">
               {
                 whatYouLearn.map((item) => (
                   <li class="flex gap-3 items-start">
                     <svg
                       class="w-5 h-5 text-green-400 flex-shrink-0 mt-0.5"
                       fill="none"
                       stroke="currentColor"
                       viewBox="0 0 24 24"
                     >
                       <path
                         stroke-linecap="round"
                         stroke-linejoin="round"
                         stroke-width="2"
                         d="M5 13l4 4L19 7"
                       />
                     </svg>
                     <span class="text-slate-300 text-sm leading-relaxed">
                       {item}
                     </span>
                   </li>
                 ))
               }
             </ul>
           </div>

          <!-- Description & Career Benefits (Expanded) -->
          <div
            class="bg-slate-900/50 border border-slate-800 rounded-2xl p-6 sm:p-8"
          >
            <h2 class="text-xl font-bold text-white mb-4">
              Course Description
            </h2>
            <div
              class="prose prose-invert prose-sm sm:prose-base max-w-none text-slate-300"
            >
              <p class="mb-4">{course.description}</p>
              
               <h3 class="text-lg font-bold text-white mt-6 mb-3">Reasons to Enroll in {course.title}</h3>
              <p>
                This comprehensive course is specifically designed for individuals aiming to
                master {course.category}. The curriculum of <strong>{course.title}</strong> covers everything from
                fundamental principles to advanced techniques, ensuring a robust educational foundation.
                With {course.totalLectures} lectures and {course.duration} of on-demand video,
                students will have extensive resources to master {extractKeySkill(course.description)}.
              </p>

              <h3 class="text-lg font-bold text-white mt-6 mb-3">Professional & Career Benefits</h3>
              <p class="text-sm mb-3">Upon completion of this course, students will achieve the following professional advantages:</p>
               <ul class="list-disc pl-5 space-y-2 mt-2">
                {benefits.map(benefit => (
                    <li>{benefit}</li>
                ))}
              </ul>

              <h3 class="text-lg font-bold text-white mt-6 mb-3">Target Audience for {course.title}</h3>
              <p>
                  This course is expertly tailored for:
              </p>
              <ul class="list-disc pl-5 space-y-2 mt-2">
                  <li>Beginners looking to start a new career in {course.category}.</li>
                  <li>Experienced professionals seeking to upgrade their skills in {extractKeySkill(course.description)}.</li>
                  <li>Students wanting to earn a certification in {course.category}.</li>
              </ul>
            </div>
          </div>

          <!-- Instructor & Requirements (Contextualized) -->
          <div class="grid md:grid-cols-2 gap-8">
            <div
              class="bg-slate-900/50 border border-slate-800 rounded-2xl p-6"
            >
              <h3 class="text-lg font-bold text-white mb-4">
                üë®‚Äçüè´ Course Instructor
              </h3>
              <div class="flex items-center gap-4 mb-3">
                <div
                  class="w-12 h-12 bg-slate-800 rounded-full flex items-center justify-center text-xl font-bold text-slate-500 border border-slate-700"
                >
                  {(course.instructor || "I").charAt(0)}
                </div>
                <div>
                  <div class="font-bold text-white">{course.instructor}</div>
                  <div class="text-xs text-slate-500">
                    Subject Matter Expert
                  </div>
                </div>
              </div>
              <p class="text-sm text-slate-400 leading-relaxed">
               Your instructor, <strong>{course.instructor}</strong>, is an experienced professional with a passion for teaching {
                  course.category
                }. They are highly rated by students for their clear teaching style and practical
                real-world examples.
              </p>
            </div>

            <div
              class="bg-slate-900/50 border border-slate-800 rounded-2xl p-6"
            >
              <h3 class="text-lg font-bold text-white mb-4">
                üìã Prerequisites & Requirements
              </h3>
               <p class="text-slate-400 text-sm mb-3">To successfully complete this course, students should meet the following prerequisites:</p>
              <ul class="space-y-2">
                <li class="flex gap-2 text-sm text-slate-400">
                  <span class="text-blue-500">‚Ä¢</span> No prior knowledge is required (Beginner friendly).
                </li>
                <li class="flex gap-2 text-sm text-slate-400">
                  <span class="text-blue-500">‚Ä¢</span> A computer with stable internet access.
                </li>
                <li class="flex gap-2 text-sm text-slate-400">
                  <span class="text-blue-500">‚Ä¢</span> A willingness to learn and practice new concepts.
                </li>
              </ul>
            </div>
          </div>

          <!-- Restored Student Reviews & Testimonials -->
          <div
            class="bg-slate-900 border border-slate-700 rounded-lg shadow-sm p-8 mb-8"
          >
             <div class="flex items-center justify-between mb-6">
              <h2 class="text-2xl font-bold text-white">
                Real Student Experiences & Testimonials
              </h2>
               <div class="flex items-center gap-2">
                    <span class="text-yellow-400">‚òÖ‚òÖ‚òÖ‚òÖ‚òÖ</span>
                    <span class="text-slate-400 text-sm">{course.rating} Rating</span>
               </div>
            </div>

            <p class="text-slate-400 text-sm mb-6">
                Read what verified students are saying about their learning journey with <strong>{course.title}</strong>:
            </p>

            <div class="grid md:grid-cols-2 gap-6">
              {
                sampleTestimonials.map((testimonial, index) => (
                  <div class="bg-gradient-to-br from-slate-800 to-slate-900 rounded-xl p-6 border border-slate-700 shadow-sm hover:shadow-md transition-shadow">
                    <div class="flex items-center mb-4">
                      <div class="w-10 h-10 bg-gradient-to-r from-blue-600 to-purple-600 rounded-full flex items-center justify-center text-white font-bold text-sm mr-3">
                        {testimonial.name.charAt(0)}
                      </div>
                      <div>
                        <div class="font-bold text-white text-sm">
                          {testimonial.name}
                        </div>
                        <div class="flex items-center">
                          <span class="text-yellow-400 text-xs">‚òÖ‚òÖ‚òÖ‚òÖ‚òÖ</span>
                          <span class="text-xs text-slate-500 ml-2">
                            Verified Student
                          </span>
                        </div>
                      </div>
                    </div>
                    <p class="text-slate-300 text-sm leading-relaxed italic">
                      "{testimonial.text}"
                    </p>
                  </div>
                ))
              }
            </div>

            <div class="text-center mt-8">
              <p class="text-slate-400 text-sm mb-4">
                Join over <strong class="text-white"
                  >{course.students.toLocaleString()}</strong
                > students who have already enrolled in this top-rated course.
              </p>
              <a
                href={course.url}
                target="_blank"
                rel="nofollow noopener noreferrer"
                class="inline-flex items-center gap-2 bg-slate-800 hover:bg-slate-700 text-white font-bold py-2 px-6 rounded-lg transition-colors border border-slate-600 text-sm"
              >
                Read All Reviews on Udemy
              </a>
            </div>
          </div>

          <!-- FAQ Section (AI Optimized) -->
           <div
            class="bg-slate-900/50 border border-slate-800 rounded-2xl p-6 sm:p-8"
          >
            <h2 class="text-xl font-bold text-white mb-6">
              Frequently Asked Questions about {course.title}
            </h2>
            <p class="text-slate-400 text-sm mb-6">
                Common questions regarding the enrollment process, certification, and requirements for this <strong>{course.category}</strong> course:
            </p>
            <div
              class="space-y-4"
              itemscope
              itemtype="https://schema.org/FAQPage"
            >
              <details
                class="group bg-slate-950/50 rounded-xl border border-slate-800 open:border-blue-500/30 transition-all"
                itemscope
                itemprop="mainEntity"
                itemtype="https://schema.org/Question"
              >
                <summary
                  class="flex justify-between items-center p-4 cursor-pointer font-medium text-slate-200"
                  itemprop="name"
                >
                  Is the {course.title} Udemy course free?
                  <span class="transition-transform group-open:rotate-180"
                    >‚ñº</span
                  >
                </summary>
                <div
                  class="p-4 pt-0 text-slate-400 text-sm leading-relaxed border-t border-slate-800/0 group-open:border-slate-800/50"
                  itemscope
                  itemprop="acceptedAnswer"
                  itemtype="https://schema.org/Answer"
                >
                  <div itemprop="text">
                    Yes, this coupon provides **100% off** for the {
                      course.title
                    } course on Udemy. It is currently verified as active and valid.
                  </div>
                </div>
              </details>

              <details
                class="group bg-slate-950/50 rounded-xl border border-slate-800 open:border-blue-500/30 transition-all"
                itemscope
                itemprop="mainEntity"
                itemtype="https://schema.org/Question"
              >
                <summary
                  class="flex justify-between items-center p-4 cursor-pointer font-medium text-slate-200"
                  itemprop="name"
                >
                  Do I get a certificate for {course.title}?
                  <span class="transition-transform group-open:rotate-180"
                    >‚ñº</span
                  >
                </summary>
                <div
                  class="p-4 pt-0 text-slate-400 text-sm leading-relaxed border-t border-slate-800/0 group-open:border-slate-800/50"
                  itemscope
                  itemprop="acceptedAnswer"
                  itemtype="https://schema.org/Answer"
                >
                  <div itemprop="text">
                    Yes, upon completing the course, Udemy will issue a
                    **Certificate of Completion** which you can download and add
                    to your LinkedIn profile.
                  </div>
                </div>
              </details>

              <details
                class="group bg-slate-950/50 rounded-xl border border-slate-800 open:border-blue-500/30 transition-all"
                itemscope
                itemprop="mainEntity"
                itemtype="https://schema.org/Question"
              >
                <summary
                  class="flex justify-between items-center p-4 cursor-pointer font-medium text-slate-200"
                  itemprop="name"
                >
                  What are the requirements for {course.title}?
                  <span class="transition-transform group-open:rotate-180"
                    >‚ñº</span
                  >
                </summary>
                <div
                  class="p-4 pt-0 text-slate-400 text-sm leading-relaxed border-t border-slate-800/0 group-open:border-slate-800/50"
                  itemscope
                  itemprop="acceptedAnswer"
                  itemtype="https://schema.org/Answer"
                >
                  <div itemprop="text">
                    There are no specific prerequisites. You just need a
                    computer, an internet connection, and a willingness to learn {
                      course.category
                    }.
                  </div>
                </div>
              </details>
            </div>
          </div>
        </div>

        <!-- RIGHT SIDEBAR (Sticky) (4/12) -->
        <div class="lg:col-span-4 relative">
          <div class="sticky top-6 space-y-6">
            <!-- COUPON CARD -->
            <div
              class="bg-gradient-to-b from-slate-800 to-slate-900 rounded-2xl p-1 border border-blue-500/50 shadow-2xl shadow-blue-900/20"
            >
              <div
                class="bg-slate-950/90 rounded-xl p-6 text-center backdrop-blur-sm"
              >
                <div
                  class="inline-block bg-green-500/10 text-green-400 text-xs font-bold px-3 py-1 rounded-full mb-4 border border-green-500/20 animate-pulse"
                  title="Verified by CoursesWyn Automated System"
                >
                  ‚óè VERIFIED ACTIVE by CoursesWyn
                </div>

                <div class="flex items-center justify-center gap-3 mb-2">
                  <span class="text-4xl font-black text-white tracking-tight"
                    >{course.price}</span
                  >
                  <span class="text-lg text-slate-500 line-through decoration-2"
                    >{course.originalPrice}</span
                  >
                </div>
                <div class="text-blue-400 text-sm font-bold mb-6">
                  {course.discount} Discount Applied
                </div>

                <a
                  href={course.url}
                  target="_blank"
                  rel="nofollow noopener noreferrer"
                  class="block w-full bg-blue-600 hover:bg-blue-500 text-white font-black text-lg py-4 rounded-xl shadow-lg shadow-blue-600/20 transition-all hover:scale-[1.02] active:scale-[0.98]"
                >
                  ENROLL NOW ‚û§
                </a>
                <p class="text-xs text-slate-500 mt-4">
                  30-Day Money-Back Guarantee ‚Ä¢ Lifetime Access
                </p>
              </div>
            </div>

            <!-- Course Specs -->
            <div class="bg-slate-900 border border-slate-800 rounded-2xl p-6">
              <h3
                class="font-bold text-white mb-4 text-sm uppercase tracking-wide text-slate-400"
              >
                Course Specs
              </h3>
              <div class="space-y-3 text-sm">
                <div
                  class="flex justify-between text-slate-300 border-b border-slate-800 pb-2"
                >
                  <span>Duration</span>
                  <span class="font-bold text-white">{course.duration}</span>
                </div>
                <div
                  class="flex justify-between text-slate-300 border-b border-slate-800 pb-2"
                >
                  <span>Lectures</span>
                  <span class="font-bold text-white"
                    >{course.totalLectures}</span
                  >
                </div>
                <div
                  class="flex justify-between text-slate-300 border-b border-slate-800 pb-2"
                >
                  <span>Level</span>
                  <span class="font-bold text-white">{course.level}</span>
                </div>
                <div class="flex justify-between text-slate-300">
                  <span>Language</span>
                  <span class="font-bold text-white">{course.language}</span>
                </div>
              </div>
            </div>

            <!-- Similar Courses Link (Enhanced) -->
            {
              similarCourses.length > 0 && (
                <div class="bg-slate-900 border border-slate-800 rounded-2xl p-6">
                  <h3 class="font-bold text-white mb-4 flex items-center gap-2">
                    <span class="text-blue-500">üî•</span> Top Rated{" "}
                    {course.category} Courses
                  </h3>
                  <div class="space-y-6">
                    {similarCourses.map((sim) => (
                      <a
                        href={`/coupon/${sim.slug}`}
                        class="block group bg-slate-800 rounded-xl overflow-hidden border border-slate-700 hover:border-blue-500 transition-colors shadow-lg"
                      >
                        <div class="relative h-32 overflow-hidden">
                          <img
                            src={sim.image}
                            class="w-full h-full object-cover group-hover:scale-105 transition-transform duration-500"
                            alt={`Best ${sim.title} Course Coupon`}
                          />
                          <div class="absolute top-2 right-2 bg-red-600 text-white text-[10px] font-bold px-2 py-1 rounded">
                            {sim.discount} OFF
                          </div>
                        </div>
                        <div class="p-4">
                          <h4 class="text-sm font-bold text-white leading-tight mb-2 group-hover:text-blue-400 transition-colors">
                            {sim.title}
                          </h4>
                          <div class="flex items-center justify-between">
                            <div class="flex items-center gap-1">
                              <span class="text-yellow-400 text-xs">‚òÖ</span>
                              <span class="text-xs text-slate-400">
                                {sim.rating}
                              </span>
                            </div>
                            <span class="text-green-400 text-xs font-bold">
                              Free Coupon
                            </span>
                          </div>
                        </div>
                      </a>
                    ))}
                  </div>
                </div>
              )
            }
          </div>
        </div>
      </div>
    </div>

    <!-- MOBILE STICKY FOOTER CTA -->
    <div
      class="fixed bottom-0 left-0 right-0 p-4 bg-slate-950/90 backdrop-blur-lg border-t border-slate-800 z-50 lg:hidden"
    >
      <div class="flex gap-3 items-center max-w-lg mx-auto">
        <div class="flex-1">
          <div class="text-xs text-slate-400 line-through">
            {course.originalPrice}
          </div>
          <div class="text-xl font-black text-white leading-none">
            {course.price}
          </div>
        </div>
        <a
          href={course.url}
          target="_blank"
          rel="nofollow noopener noreferrer"
          class="bg-blue-600 hover:bg-blue-500 text-white font-bold py-3 px-8 rounded-xl shadow-lg flex-1 text-center"
        >
          ENROLL NOW
        </a>
      </div>
    </div>
  </div>
</Layout>
) : (
<Layout
  title={title}
  description={description}
  canonical={canonical}
  structuredData={structuredData}
>
  <main>
    <section class="relative overflow-hidden bg-gradient-to-b from-slate-950 via-slate-900 to-slate-800 py-20">
      <div class="max-w-7xl mx-auto px-4 text-center">
         <div class="inline-flex items-center gap-2 mb-6 px-4 py-2 bg-blue-500/20 border border-blue-500/40 rounded-full">
            <span class="text-blue-300">‚ö° Verified {name} Coupons</span>
         </div>
         <h1 class="text-4xl font-black text-white mb-4">
            Best <span class="bg-gradient-to-r from-blue-400 to-cyan-400 bg-clip-text text-transparent">{name}</span> Courses & Coupons
         </h1>
         <p class="text-slate-300 mb-8 max-w-2xl mx-auto text-lg leading-relaxed">
             Master {name} with our curated list of {catCourses.length} top-rated courses.
             All deals are verified active for {currentMonthYear}.
             Start learning skills in {name} today with 100% OFF coupons.
         </p>
         <div class="flex gap-4 justify-center mb-12">
            <a href="#browse-courses" class="px-8 py-3 bg-blue-600 text-white font-bold rounded-xl hover:bg-blue-500 transition-colors shadow-lg shadow-blue-600/20">
                Browse Deals
            </a>
         </div>
      </div>
    </section>

    <!-- AI Optimized Intro Section -->
    <section class="max-w-7xl mx-auto px-4 py-8">
        <div class="bg-slate-900/50 border border-slate-800 rounded-2xl p-6 sm:p-8">
            <h2 class="text-xl font-bold text-white mb-4">Why Learn {name}?</h2>
             <p class="text-slate-400 leading-relaxed mb-4">
                <strong>{name}</strong> is one of the most sough-after skills in today's job market.
                Whether you are a beginner looking to start a new career or a professional aiming to upskill,
                mastering {name} can open doors to exciting opportunities.
            </p>
             <p class="text-slate-400 leading-relaxed">
                Our automated system constantly scans and verifies the best Udemy coupons for {name}, ensuring you get access to premium education for free.
                Below you will find a list of courses sorted by popularity and rating.
            </p>
        </div>
    </section>

    <section id="browse-courses" class="max-w-7xl mx-auto px-4 py-16">
      <h2 class="text-2xl font-black text-white mb-4 flex items-center gap-3">
        <span>üìö</span> Available {name} Courses
      </h2>
      <p class="text-slate-400 mb-8">
        Found {catCourses.length} verified free coupons for <strong>{name}</strong>.
      </p>
      
      <div class="grid md:grid-cols-2 lg:grid-cols-3 gap-6">
        {
          catCourses.map((c) => (
             <div class="transform hover:-translate-y-1 transition-transform duration-300">
              <DealCard {...c} />
            </div>
          ))
        }
      </div>
    </section>
  </main>
</Layout>
)}
