---
import Layout from '../../layouts/Layout.astro';
import courses from '../../data/coupons.json';

export async function getStaticPaths() {
  return courses.map(course => ({
    params: { slug: course.slug },
    props: { course }
  }));
}

const { course } = Astro.props;

// Global function for extracting key skills from course descriptions
const extractKeySkill = (description: string) => {
  const desc = description.toLowerCase();

  // Cybersecurity & Security
  if (desc.includes('hacking') || desc.includes('penetration') || desc.includes('pentesting')) return 'ethical hacking & cybersecurity';
  if (desc.includes('cybersecurity') || desc.includes('bug bounty') || desc.includes('vulnerability')) return 'cybersecurity & bug bounty';
  if (desc.includes('network security') || desc.includes('firewall') || desc.includes('encryption')) return 'network security';

  // Data Science & Analytics
  if (desc.includes('machine learning') || desc.includes('deep learning') || desc.includes('neural network')) return 'machine learning & AI';
  if (desc.includes('data science') || desc.includes('data analysis') || desc.includes('big data')) return 'data science & analytics';
  if (desc.includes('data visualization') || desc.includes('tableau') || desc.includes('power bi')) return 'data visualization';
  if (desc.includes('statistics') || desc.includes('statistical analysis') || desc.includes('probability')) return 'statistics & probability';

  // Web Development
  if (desc.includes('full stack') || desc.includes('full-stack')) return 'full-stack web development';
  if (desc.includes('front-end') || desc.includes('frontend') || desc.includes('react') || desc.includes('vue') || desc.includes('angular')) return 'front-end development';
  if (desc.includes('back-end') || desc.includes('backend') || desc.includes('node.js') || desc.includes('django') || desc.includes('laravel')) return 'back-end development';
  if (desc.includes('html') || desc.includes('css') || desc.includes('responsive design')) return 'HTML/CSS & responsive design';

  // Programming Languages
  if (desc.includes('javascript') || desc.includes('js') || desc.includes('es6') || desc.includes('typescript')) return 'JavaScript & TypeScript';
  if (desc.includes('python') && !desc.includes('hacking')) return 'Python programming';
  if (desc.includes('java') || desc.includes('spring boot') || desc.includes('android')) return 'Java development';
  if (desc.includes('c++') || desc.includes('c#') || desc.includes('dotnet')) return 'C++ & C# programming';

  // AI & Emerging Tech
  if (desc.includes('artificial intelligence') || desc.includes('chatgpt') || desc.includes('gpt') || desc.includes('openai')) return 'AI & ChatGPT';
  if (desc.includes('generative ai') || desc.includes('dall-e') || desc.includes('stable diffusion')) return 'generative AI';
  if (desc.includes('computer vision') || desc.includes('opencv') || desc.includes('image processing')) return 'computer vision';
  if (desc.includes('nlp') || desc.includes('natural language processing') || desc.includes('text mining')) return 'NLP & text analytics';

  // DevOps & Cloud
  if (desc.includes('docker') || desc.includes('kubernetes') || desc.includes('container')) return 'Docker & containerization';
  if (desc.includes('aws') || desc.includes('azure') || desc.includes('google cloud')) return 'cloud computing';
  if (desc.includes('devops') || desc.includes('ci/cd') || desc.includes('jenkins')) return 'DevOps & CI/CD';

  // Business & Design
  if (desc.includes('digital marketing') || desc.includes('seo') || desc.includes('social media')) return 'digital marketing & SEO';
  if (desc.includes('ui/ux') || desc.includes('user experience') || desc.includes('figma') || desc.includes('adobe xd')) return 'UI/UX design';
  if (desc.includes('blockchain') || desc.includes('cryptocurrency') || desc.includes('web3')) return 'blockchain & Web3';

  // Mobile Development
  if (desc.includes('react native') || desc.includes('flutter') || desc.includes('mobile app')) return 'mobile app development';
  if (desc.includes('ios') || desc.includes('swift') || desc.includes('xcode')) return 'iOS development';
  if (desc.includes('android') || desc.includes('kotlin') || desc.includes('mobile development')) return 'Android development';

  // Default fallback
  return course.category;
};

// Generate SEO-optimized title with target keywords - optimized for length
const generateOptimizedTitle = (course: any) => {
  // Extract key skill for title optimization
  const extractKeySkillForTitle = (description: string) => {
    const desc = description.toLowerCase();
    if (desc.includes('hacking') || desc.includes('penetration')) return 'Ethical Hacking';
    if (desc.includes('machine learning') || desc.includes('deep learning')) return 'Machine Learning';
    if (desc.includes('data science') || desc.includes('data analysis')) return 'Data Science';
    if (desc.includes('web development') || desc.includes('full stack')) return 'Web Development';
    if (desc.includes('javascript') || desc.includes('react')) return 'JavaScript';
    if (desc.includes('python') && !desc.includes('hacking')) return 'Python';
    if (desc.includes('ai') || desc.includes('artificial intelligence')) return 'AI';
    if (desc.includes('cybersecurity') || desc.includes('bug bounty')) return 'Cybersecurity';
    return course.category;
  };

  const keySkill = extractKeySkillForTitle(course.description);

  // Shorten course title if too long (keep first 40 chars and add ellipsis if needed)
  let shortTitle = course.title;
  if (course.title.length > 40) {
    shortTitle = course.title.substring(0, 37) + '...';
  }

  // Optimized title format: [Discount] OFF [Short Title] - Learn [Key Skill] Udemy
  // Target: under 60 characters for optimal SERP display
  const optimizedTitle = `${course.discount} OFF ${shortTitle} - ${keySkill} Udemy Course`;

  // If still too long, use shorter format
  if (optimizedTitle.length > 60) {
    return `${course.discount} OFF ${keySkill} Course - Udemy`;
  }

  return optimizedTitle;
};

const generateOptimizedDescription = (course: any) => {
  // Create unique descriptions with full title, keeping within SEO limits
  const keySkill = extractKeySkill(course.description);
  const fullDesc = `ðŸš€ Get ${course.title} FREE with ${course.discount} OFF! ${course.rating}â­ rated by ${course.students.toLocaleString()}+ students. Master ${keySkill} skills with lifetime access & certificate. No credit card required. Best Udemy deal 2026!`;

  return fullDesc;
};

const title = generateOptimizedTitle(course);
const description = generateOptimizedDescription(course);
const canonical = `https://courseswyn.com/coupon/${course.slug}/`;
// Generate comprehensive long-tail keywords
const generateLongTailKeywords = (course: any) => {
  const baseKeywords = [
    course.title,
    course.category,
    'Udemy coupon',
    course.discount,
    'free certificate',
    course.instructor,
    course.level,
    'online course',
    'professional certification'
  ];

  // Comprehensive Udemy keyword variations
  const longTailVariations = [
    `${course.title} udemy coupon`,
    `${course.title} udemy discount`,
    `${course.title} udemy free`,
    `${course.title} coupon code`,
    `${course.title} discount code`,
    `${course.title} free course`,
    `free ${course.title}`,
    `${course.discount} off ${course.title}`,
    `${course.title} certificate`,
    `${course.title} ${course.level}`,
    `learn ${course.category} online`,
    `${course.category} course ${course.discount} off`,
    `udemy ${course.category} course free`,
    `${course.title} lifetime access`,
    `${course.title} professional certificate`,
    // Core Udemy keywords
    'udemy coupon',
    'udemy discount',
    'udemy free',
    'udemy deal',
    'udemy course',
    'udemy certificate',
    '100% off udemy',
    'udemy promo code',
    'udemy voucher',
    'free udemy courses',
    'udemy discount code',
    'udemy certification',
    'udemy online courses',
    'best udemy courses',
    'udemy coupons 2026',
    'udemy promo codes',
    'udemy voucher codes',
    'udemy discount codes',
    'udemy free courses',
    'udemy certification courses',
    'udemy professional certificate',
    'udemy lifetime access'
  ];

  return [...baseKeywords, ...longTailVariations].join(', ');
};

const keywords = generateLongTailKeywords(course);

// Enhanced JSON-LD structured data for full SEO
const structuredData = {
  "@context": "https://schema.org",
  "@graph": [
    {
      "@type": "Course",
      "name": course.title,
      "description": course.description,
      "image": course.image,
      "provider": {
        "@type": "Organization",
        "name": "Udemy",
        "url": "https://www.udemy.com"
      },
      "instructor": {
        "@type": "Person",
        "name": course.instructor
      },
      "aggregateRating": {
        "@type": "AggregateRating",
        "ratingValue": parseFloat(String(course.rating)),
        "reviewCount": course.students,
        "bestRating": 5,
        "worstRating": 1
      },
      "review": {
        "@type": "Review",
        "author": {
          "@type": "Person",
          "name": "CoursesWyn Verified Review"
        },
        "reviewRating": {
          "@type": "Rating",
          "ratingValue": parseFloat(String(course.rating)),
          "bestRating": 5,
          "worstRating": 1
        },
        "reviewBody": `${course.title} receives ${course.rating} stars from ${course.students.toLocaleString()}+ students. This comprehensive ${course.category} course offers lifetime access and professional certification at a discounted price.`
      },
      "offers": {
        "@type": "Offer",
        "price": parseFloat(course.price.replace('$', '')),
        "priceCurrency": "USD",
        "availability": "https://schema.org/InStock",
        "priceValidUntil": new Date(Date.now() + 30 * 24 * 60 * 60 * 1000).toISOString().split('T')[0],
        "url": canonical,
        "seller": {
          "@type": "Organization",
          "name": "CoursesWyn"
        }
      },
      "courseMode": "online",
      "educationalUse": "professional development",
      "teaches": course.category,
      "educationalLevel": course.level,
      "timeRequired": `PT${course.duration.replace(/\s*(hours?|hrs?)\s*/i, 'H').replace(/\s*(minutes?|mins?)\s*/i, 'M')}0S`,
      "hasCourseInstance": {
        "@type": "CourseInstance",
        "courseMode": "online",
        "courseWorkload": course.duration,
        "instructor": {
          "@type": "Person",
          "name": course.instructor,
          "jobTitle": `${course.category} Instructor`,
          "knowsAbout": extractKeySkill(course.description)
        },
        "coursePrerequisites": course.level === 'Beginner' ? 'No prior experience required' : `Basic knowledge of ${course.category}`,
        "teaches": extractKeySkill(course.description),
        "educationalLevel": course.level,
        "numberOfCredits": course.totalLectures,
        "inLanguage": course.language || "en"
      },
      "about": {
        "@type": "DefinedTerm",
        "name": course.category,
        "description": `Learn ${course.category} with comprehensive training covering essential skills and practical applications.`
      }
    },
    {
      "@type": "BreadcrumbList",
      "itemListElement": [
        {
          "@type": "ListItem",
          "position": 1,
          "name": "Home",
          "item": "https://courseswyn.com/"
        },
        {
          "@type": "ListItem",
          "position": 2,
          "name": "Coupons",
          "item": "https://courseswyn.com/coupon/"
        },
        {
          "@type": "ListItem",
          "position": 3,
          "name": course.title,
          "item": canonical
        }
      ]
    },
    {
      "@type": "FAQPage",
      "mainEntity": [
        {
          "@type": "Question",
          "name": `Is the ${course.title} course worth it? ${course.title} Udemy review`,
          "acceptedAnswer": {
            "@type": "Answer",
            "text": `Yes! This ${course.category} course has excellent ratings (${course.rating} stars from ${course.students.toLocaleString()} students) and covers essential skills with lifetime access. The ${course.discount} discount makes it an exceptional value. Get ${course.title} Udemy coupon for the best deal.`
          }
        },
        {
          "@type": "Question",
          "name": `${course.title} ${course.discount} off - is this a good deal?`,
          "acceptedAnswer": {
            "@type": "Answer",
            "text": `Absolutely! The ${course.discount} off ${course.title} Udemy discount makes this premium ${course.category} course available at an unbeatable price. Regular price would be much higher for this quality content with ${course.students.toLocaleString()}+ students enrolled.`
          }
        },
        {
          "@type": "Question",
          "name": `Is ${course.title} Udemy free with coupon?`,
          "acceptedAnswer": {
            "@type": "Answer",
            "text": `Yes! Use our verified ${course.title} Udemy coupon to get this course completely free. The coupon code provides ${course.discount} off, making it free for new students. Don't miss this ${course.title} Udemy free offer!`
          }
        },
        {
          "@type": "Question",
          "name": "Do I need prior experience to take this course?",
          "acceptedAnswer": {
            "@type": "Answer",
            "text": `This course is designed for ${course.level.toLowerCase()} level students. ${course.level === 'Beginner' ? 'No prior experience required - perfect for beginners learning ' + course.category.toLowerCase() : 'Some basic knowledge in ' + course.category.toLowerCase() + ' is recommended but not mandatory'}.`
          }
        },
        {
          "@type": "Question",
          "name": `Does ${course.title} include certificate? ${course.title} professional certification`,
          "acceptedAnswer": {
            "@type": "Answer",
            "text": `Yes! ${course.title} includes a professional certificate upon completion that you can add to your LinkedIn profile, resume, or portfolio. The Udemy certificate is recognized worldwide and demonstrates your ${course.category} proficiency.`
          }
        },
        {
          "@type": "Question",
          "name": `${course.title} lifetime access - how long do I have access?`,
          "acceptedAnswer": {
            "@type": "Answer",
            "text": `${course.title} provides lifetime access! Once enrolled with our coupon, you can learn at your own pace and revisit the material anytime. No expiration dates or hidden fees for this ${course.title} Udemy course.`
          }
        },
        {
          "@type": "Question",
          "name": `What will I learn in ${course.title}? ${extractKeySkill(course.description)} course content`,
          "acceptedAnswer": {
            "@type": "Answer",
            "text": `${course.title} teaches you ${extractKeySkill(course.description)} through ${course.totalLectures} comprehensive lectures. You'll master practical skills with hands-on projects and real-world applications. Perfect for ${course.level.toLowerCase()} level students looking to advance their ${course.category} career.`
          }
        },
        {
          "@type": "Question",
          "name": `${course.title} instructor - who teaches this course?`,
          "acceptedAnswer": {
            "@type": "Answer",
            "text": `${course.title} is taught by ${course.instructor}, an experienced professional with expertise in ${course.category}. With ${course.students.toLocaleString()}+ students enrolled and excellent ${course.rating}â­ ratings, this instructor provides high-quality education and ongoing support throughout the course.`
          }
        }
      ]
    },
    {
      "@type": "WebPage",
      "@id": canonical,
      "url": canonical,
      "name": title,
      "description": description,
      "inLanguage": course.language || "en",
      "datePublished": new Date().toISOString(),
      "dateModified": new Date().toISOString(),
      "publisher": {
        "@type": "Organization",
        "name": "CoursesWyn",
        "url": "https://courseswyn.com",
        "logo": {
          "@type": "ImageObject",
          "url": "https://courseswyn.com/images/og-default.svg"
        }
      },
      "potentialAction": {
        "@type": "SearchAction",
        "target": "https://courseswyn.com/search?q={search_term_string}",
        "query-input": "required name=search_term_string"
      }
    },
    // FAQ Schema for Rich Snippets
    {
      "@type": "FAQPage",
      "mainEntity": [
        {
          "@type": "Question",
          "name": `Is the ${course.title} course worth it? ${course.title} Udemy review`,
          "acceptedAnswer": {
            "@type": "Answer",
            "text": `Yes! This ${course.category} course has excellent ratings (${course.rating} stars from ${course.students.toLocaleString()} students) and covers essential skills with lifetime access. The ${course.discount} discount makes it an exceptional value. Get ${course.title} Udemy coupon for the best deal.`
          }
        },
        {
          "@type": "Question",
          "name": `${course.title} ${course.discount} off - is this a good deal?`,
          "acceptedAnswer": {
            "@type": "Answer",
            "text": `Absolutely! The ${course.discount} off ${course.title} Udemy discount makes this premium ${course.category} course available at an unbeatable price. Regular price would be much higher for this quality content with ${course.students.toLocaleString()}+ students enrolled.`
          }
        },
        {
          "@type": "Question",
          "name": `Is ${course.title} Udemy free with coupon?`,
          "acceptedAnswer": {
            "@type": "Answer",
            "text": `Yes! Use our verified ${course.title} Udemy coupon to get this course completely free. The coupon code provides ${course.discount} off, making it free for new students. Don't miss this ${course.title} Udemy free offer!`
          }
        },
        {
          "@type": "Question",
          "name": "Do I need prior experience to take this course?",
          "acceptedAnswer": {
            "@type": "Answer",
            "text": `This course is designed for ${course.level.toLowerCase()} level students. ${course.level === 'Beginner' ? 'No prior experience required - perfect for complete beginners learning ' + course.category.toLowerCase() : 'Some basic knowledge in ' + course.category.toLowerCase() + ' is recommended but not mandatory'}.`
          }
        },
        {
          "@type": "Question",
          "name": `Does ${course.title} include certificate? ${course.title} professional certification`,
          "acceptedAnswer": {
            "@type": "Answer",
            "text": `Yes! ${course.title} includes a professional certificate upon completion that you can add to your LinkedIn profile, resume, or portfolio. The Udemy certificate is recognized worldwide and demonstrates your ${course.category} proficiency.`
          }
        },
        {
          "@type": "Question",
          "name": `${course.title} lifetime access - how long do I have access?`,
          "acceptedAnswer": {
            "@type": "Answer",
            "text": `${course.title} provides lifetime access! Once enrolled with our coupon, you can learn at your own pace and revisit the material anytime. No expiration dates or hidden fees for this ${course.title} Udemy course.`
          }
        }
      ]
    }
  ]
};

// Find similar courses - show up to 6 courses
const similarCourses = courses
  .filter(c => c.category === course.category && c.slug !== course.slug)
  .slice(0, 6);

// Auto-generated content based on course data
const generateWhatYouLearn = (course: any) => {
  const baseSkills = [
    `Master ${course.category} fundamentals and core concepts`,
    "Learn industry-standard practices and techniques",
    "Build practical projects with real-world applications",
    "Understand modern approaches and best practices",
    "Get hands-on experience with comprehensive exercises"
  ];

  // Add category-specific skills
  const categorySkills: Record<string, string[]> = {
    'python': [
      "Write efficient Python code with proper syntax and structure",
      "Work with Python data structures and algorithms",
      "Create automation scripts and data processing applications"
    ],
    'javascript': [
      "Build interactive web applications with JavaScript",
      "Master DOM manipulation and event handling",
      "Create modern front-end and back-end solutions"
    ],
    'data-science': [
      "Analyze and visualize complex datasets",
      "Apply statistical methods and machine learning algorithms",
      "Create predictive models and data-driven insights"
    ],
    'web-development': [
      "Design and develop responsive websites",
      "Implement modern web technologies and frameworks",
      "Create full-stack applications with databases"
    ],
    'ai': [
      "Understand artificial intelligence and machine learning concepts",
      "Implement AI algorithms and neural networks",
      "Build intelligent applications and automation systems"
    ]
  };

  const specificSkills = categorySkills[course.category] || [];
  // Show all base skills + all category-specific skills for more comprehensive content
  return [...baseSkills, ...specificSkills];
};

const generateRequirements = (course: any) => {
  const baseRequirements = [
    "Basic computer skills and internet access",
    "Access to a computer or mobile device"
  ];

  // Level-based requirements
  if (course.level === 'Beginner') {
    baseRequirements.push("No prior experience required - perfect for complete beginners");
  } else if (course.level === 'Intermediate') {
    baseRequirements.push(`Basic knowledge of ${course.category} recommended`);
  } else {
    baseRequirements.push(`Solid foundation in ${course.category} required`);
  }

  baseRequirements.push(`${course.language} proficiency for course materials`);

  return baseRequirements;
};

const generateCurriculum = (course: any) => {
  const baseCurriculum = [
    {
      "sectionTitle": "Course Introduction",
      "lectures": ["Welcome and Course Overview", "Setting Up Your Environment", "Course Resources and Community"]
    }
  ];

  // Category-specific curriculum
  const categoryCurriculum: Record<string, any[]> = {
    'python': [
      {
        "sectionTitle": "Python Fundamentals",
        "lectures": ["Variables, Data Types, and Operators", "Control Flow and Loops", "Functions and Modules", "File Handling and Data Processing"]
      },
      {
        "sectionTitle": "Advanced Python Concepts",
        "lectures": ["Object-Oriented Programming", "Error Handling and Testing", "Libraries and Frameworks", "Final Project Development"]
      }
    ],
    'javascript': [
      {
        "sectionTitle": "JavaScript Basics",
        "lectures": ["Variables, Functions, and Scope", "DOM Manipulation", "Events and Event Handling", "Asynchronous Programming"]
      },
      {
        "sectionTitle": "Modern JavaScript",
        "lectures": ["ES6+ Features and Syntax", "React/Vue Framework Introduction", "API Integration", "Full-Stack Project"]
      }
    ],
    'data-science': [
      {
        "sectionTitle": "Data Analysis Fundamentals",
        "lectures": ["Data Collection and Cleaning", "Statistical Analysis", "Data Visualization", "Excel and Python for Data"]
      },
      {
        "sectionTitle": "Machine Learning Applications",
        "lectures": ["Supervised Learning Algorithms", "Model Evaluation", "Neural Networks", "Capstone Data Science Project"]
      }
    ]
  };

  const specificCurriculum = categoryCurriculum[course.category] || [
    {
      "sectionTitle": "Core Concepts and Skills",
      "lectures": ["Fundamental Principles", "Practical Applications", "Advanced Techniques", "Real-World Projects"]
    },
    {
      "sectionTitle": "Advanced Topics",
      "lectures": ["Specialized Skills", "Industry Best Practices", "Case Studies", "Final Assessment Project"]
    }
  ];

  return [...baseCurriculum, ...specificCurriculum];
};

const generateDescription = (course: any) => {
  const levelText = course.level === 'Beginner' ? 'perfect for beginners with no prior experience' :
                   course.level === 'Intermediate' ? 'ideal for those with basic knowledge looking to advance' :
                   'designed for experienced professionals seeking mastery';

  const skillFocus = course.category === 'python' ? 'Python programming, data manipulation, automation, and real-world applications' :
                   course.category === 'javascript' ? 'JavaScript development, modern frameworks, and full-stack web development' :
                   course.category === 'data-science' ? 'data analysis, statistical methods, machine learning, and predictive modeling' :
                   course.category === 'web-development' ? 'web technologies, responsive design, and modern development practices' :
                   course.category === 'ai' ? 'artificial intelligence, neural networks, and intelligent system development' :
                   `professional ${course.category} skills and industry best practices`;

  return `Master ${skillFocus} with this comprehensive Udemy ${course.category.toLowerCase()} course. ${levelText}, this Udemy program includes ${course.totalLectures} expertly crafted lectures spanning ${course.duration} of high-quality content. Learn from industry professionals and gain practical skills you can immediately apply in your career. This highly-rated Udemy course (${course.rating} stars from ${course.students.toLocaleString()}+ students) provides Udemy lifetime access, professional Udemy certification, and ongoing support. Transform your career with proven ${course.category.toLowerCase()} training from Udemy that delivers real results.`;
};

// Generate dynamic content
const whatYouLearn = generateWhatYouLearn(course);
const requirements = generateRequirements(course);
const curriculum = generateCurriculum(course);
const courseDescription = generateDescription(course);

const generateRealisticTestimonials = (course: any) => {
  const testimonialTemplates = {
    'python': [
      {
        "name": "Sarah Chen",
        "rating": 5,
        "text": "As someone transitioning from Excel to Python for data analysis, this Udemy course was exactly what I needed. The instructor explains complex concepts in simple terms, and the hands-on projects helped me build confidence. I can now automate my entire data workflow and impress my colleagues with professional visualizations. This Udemy Python course is perfect for beginners looking to master data analysis!"
      },
      {
        "name": "Marcus Rodriguez",
        "rating": 5,
        "text": "I've taken several Udemy Python courses, but this one stands out for its practical approach. The real-world projects are challenging but achievable, and the instructor's explanations are clear. I particularly loved the data visualization section - my reports now look professional and insightful. Worth every penny of the Udemy discount price!"
      },
      {
        "name": "Jennifer Park",
        "rating": 4,
        "text": "Great Udemy course for learning Python data analysis! The curriculum is well-structured, starting from basics and building up to advanced topics. I appreciated the focus on practical applications rather than just theory. The only minor suggestion would be more exercises on data cleaning techniques, but overall excellent value for the Udemy coupon price."
      },
      {
        "name": "Kevin Liu",
        "rating": 5,
        "text": "This Udemy Python certification completely transformed my career! I went from zero programming knowledge to building complex data analysis applications. The lifetime access to this Udemy course means I can always come back to refresh my skills. The instructor provides outstanding support and the projects are directly applicable to real work scenarios. Best Udemy Python course I've ever taken!"
      }
    ],
    'javascript': [
      {
        "name": "David Kumar",
        "rating": 5,
        "text": "Finally understood JavaScript after struggling for months! This Udemy JavaScript course breaks down complex concepts like closures and async programming in ways that actually make sense. The projects are real-world applicable, and I built a complete web app by the end. The instructor's teaching style is engaging and patient. Perfect Udemy certification for developers looking to level up their JS skills."
      },
      {
        "name": "Emily Watson",
        "rating": 5,
        "text": "From zero to building interactive web applications in 8 weeks! This Udemy JavaScript course is incredibly well-paced for beginners. I love how each module builds on the previous one, and the final project portfolio really boosted my confidence. The community support and regular updates make this Udemy course stand out. Definitely worth the Udemy coupon investment!"
      },
      {
        "name": "Alex Thompson",
        "rating": 4,
        "text": "Solid JavaScript foundation course on Udemy. The instructor covers modern ES6+ features thoroughly, and the React integration section was particularly helpful. I wish there was more content on testing frameworks, but the core JavaScript knowledge I gained is excellent. Good pace for working professionals taking this Udemy JavaScript certification."
      },
      {
        "name": "Sophia Martinez",
        "rating": 5,
        "text": "This Udemy JavaScript course completely changed how I think about web development! The instructor makes complex topics like promises and async/await crystal clear. I landed my first developer job thanks to the portfolio projects from this Udemy course. The Udemy certification carries real weight in job applications. If you're serious about JavaScript, this is the Udemy course to take!"
      }
    ],
    'data-science': [
      {
        "name": "Dr. Maria Santos",
        "rating": 5,
        "text": "As a PhD researcher, I've used many statistical tools, but this Udemy data science course opened my eyes to modern data science workflows. The Python implementation of machine learning algorithms is explained beautifully, and the practical datasets helped me apply concepts immediately to my research. The visualization techniques alone are worth the Udemy course price!"
      },
      {
        "name": "Robert Chen",
        "rating": 5,
        "text": "Career changer here! Went from marketing to data science in 4 months with this Udemy course. The step-by-step approach, real datasets, and business-focused case studies made complex topics accessible. I landed a junior data analyst role using skills from this Udemy data science certification. The instructor's industry insights are invaluable. Thank you for making data science approachable!"
      },
      {
        "name": "Lisa Johnson",
        "rating": 4,
        "text": "Comprehensive data science overview with practical applications on Udemy. I particularly enjoyed the feature engineering and model evaluation sections. The Udemy course assumes some math background but explains concepts clearly. My only suggestion is more deep learning content, but for traditional ML techniques, this Udemy data science course is excellent. Great investment for career advancement."
      },
      {
        "name": "Ahmed Hassan",
        "rating": 5,
        "text": "This Udemy data science certification is a game-changer! As someone with a business background, I was intimidated by data science, but this Udemy course made it accessible. The real-world projects and industry-relevant case studies gave me confidence. I now lead data initiatives at my company. The Udemy lifetime access means I can always revisit complex topics. Absolutely recommend this Udemy data science course!"
      }
    ],
    'default': [
      {
        "name": "Michael Torres",
        "rating": 5,
        "text": "Transformative learning experience! The instructor's expertise shines through in every lecture, and the hands-on projects helped me build a professional portfolio. I gained practical skills that I immediately applied at work. The course structure is perfect for busy professionals, with lifetime access allowing me to revisit complex topics. Highly recommended for serious learners!"
      },
      {
        "name": "Rachel Green",
        "rating": 5,
        "text": "This course exceeded all my expectations. The content is current, well-organized, and taught by someone who clearly knows their field deeply. I appreciated the focus on real-world applications over theoretical concepts. The supportive community and regular updates make this more than just a course - it's an ongoing learning resource. Worth every moment invested!"
      },
      {
        "name": "James Wilson",
        "rating": 4,
        "text": "Solid course with practical value. The instructor explains complex topics clearly, and the projects helped reinforce learning. I would have liked more advanced topics, but for building fundamental skills, this is excellent. The pacing works well for working professionals, and the certificate adds credibility to my resume. Good overall value for the discounted price."
      }
    ]
  };

  return (testimonialTemplates as any)[course.category] || testimonialTemplates['default'];
};

// Generate realistic testimonials based on course category
const sampleTestimonials = generateRealisticTestimonials(course);
---

<Layout
  title={title}
  description={description}
  canonical={canonical}
  keywords={keywords}
  ogImage={course.image}
  structuredData={structuredData}
>


  <!-- Course Header -->
  <div class="bg-white border border-gray-200 rounded-lg shadow-sm overflow-hidden mb-8">
    <div class="grid md:grid-cols-2 gap-8 p-8">
      <!-- Course Info -->
      <div>
        <h1 class="text-3xl font-bold text-gray-900 mb-4">{course.title}</h1>
        <p class="text-gray-600 mb-6">Get Free {course.discount} Off {course.title} - Udemy Coupon with Certificate & Lifetime Access</p>

        <!-- Rating and Stats -->
        <div class="flex items-center space-x-4 mb-6">
          <div class="flex items-center">
            <div class="flex items-center mr-2">
              {[...Array(5)].map((_, i) => (
                <span class={`text-lg ${i < Math.floor(parseFloat(String(course.rating))) ? 'text-yellow-400' : 'text-gray-300'}`}>â˜…</span>
              ))}
            </div>
            <span class="font-semibold text-gray-900">{course.rating}</span>
          </div>
          <div class="text-gray-700 font-medium">{course.students.toLocaleString()} students</div>
        </div>

        <!-- Instructor -->
        <div class="mb-6">
          <p class="text-gray-500 text-sm mb-1">Created by</p>
          <p class="font-semibold text-gray-900">{course.instructor}</p>
        </div>

        <!-- Course Details Grid -->
        <div class="grid grid-cols-2 gap-6 mb-8">
          <div class="flex items-center">
            <svg class="w-5 h-5 text-gray-400 mr-3" fill="none" stroke="currentColor" viewBox="0 0 24 24">
              <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z" />
            </svg>
            <div>
              <p class="text-sm text-gray-500">Duration</p>
              <p class="font-semibold text-gray-900">{course.duration}</p>
            </div>
          </div>
          <div class="flex items-center">
            <svg class="w-5 h-5 text-gray-400 mr-3" fill="none" stroke="currentColor" viewBox="0 0 24 24">
              <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z" />
            </svg>
            <div>
              <p class="text-sm text-gray-500">Lectures</p>
              <p class="font-semibold text-gray-900">{course.totalLectures}</p>
            </div>
          </div>
          <div class="flex items-center">
            <svg class="w-5 h-5 text-gray-400 mr-3" fill="none" stroke="currentColor" viewBox="0 0 24 24">
              <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M13 10V3L4 14h7v7l9-11h-7z" />
            </svg>
            <div>
              <p class="text-sm text-gray-500">Level</p>
              <p class="font-semibold text-gray-900">{course.level}</p>
            </div>
          </div>
          <div class="flex items-center">
            <svg class="w-5 h-5 text-gray-400 mr-3" fill="none" stroke="currentColor" viewBox="0 0 24 24">
              <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M3 5h12M9 3v2m1.048 9.5A18.022 18.022 0 016.412 9m6.088 9h7M11 21l5-10 5 10M12.751 5C11.783 10.77 8.07 15.61 3 18.129" />
            </svg>
            <div>
              <p class="text-sm text-gray-500">Language</p>
              <p class="font-semibold text-gray-900">{course.language}</p>
            </div>
          </div>
        </div>
      </div>

      <!-- Course Image -->
      <div>
        <img
          src={course.image}
          alt={`${course.title} - ${extractKeySkill(course.description)} Udemy course. Get ${course.discount} off certification with lifetime access. ${course.rating} stars from ${course.students.toLocaleString()}+ students. Learn ${course.category} skills online.`}
          class="w-full rounded-lg shadow-lg"
          loading="lazy"
        />

        <!-- Price and CTA -->
        <div class="bg-gray-50 border border-gray-200 rounded-lg p-6 mt-4">
          <div class="flex items-center justify-between mb-4">
            <div class="flex items-baseline space-x-2">
              <span class="text-4xl font-bold text-red-600">{course.price}</span>
              <span class="text-xl text-gray-500 line-through">{course.originalPrice}</span>
              <span class="bg-red-100 text-red-800 px-3 py-1 rounded-full text-sm font-semibold">
                {course.discount}
              </span>
            </div>
          </div>

          {course.verified && (
            <div class="flex items-center text-green-600 text-sm mb-4">
              <svg class="w-4 h-4 mr-2" fill="currentColor" viewBox="0 0 20 20">
                <path fill-rule="evenodd" d="M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z" clip-rule="evenodd" />
              </svg>
              Verified coupon code
            </div>
          )}

          <a href={course.url} target="_blank" rel="nofollow noopener noreferrer" class="block w-full bg-red-500 hover:bg-red-600 text-white font-bold py-4 px-6 rounded text-center transition-colors mb-4">
            Get Course Now
          </a>

          {course.couponCode && (
            <div class="text-center">
              <p class="text-sm text-gray-600 mb-2">Use coupon code:</p>
              <code class="bg-gray-200 px-3 py-1 rounded text-sm font-mono">{course.couponCode}</code>
            </div>
          )}

          {course.hasLifetimeAccess && (
            <div class="flex items-center justify-center text-green-600 text-sm mt-4">
              <svg class="w-4 h-4 mr-2" fill="currentColor" viewBox="0 0 20 20">
                <path fill-rule="evenodd" d="M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z" clip-rule="evenodd" />
              </svg>
              Lifetime access included
            </div>
          )}
        </div>
      </div>
    </div>
  </div>

  <!-- What You'll Learn -->
  <div class="bg-white border border-gray-200 rounded-lg shadow-sm p-8 mb-8">
    <h2 class="text-2xl font-bold text-gray-900 mb-6">What you'll learn</h2>
    <div class="grid md:grid-cols-2 gap-3">
      {whatYouLearn.map((item: string) => (
        <div class="flex items-start">
          <svg class="w-5 h-5 text-green-500 mt-0.5 mr-3 flex-shrink-0" fill="currentColor" viewBox="0 0 20 20">
            <path fill-rule="evenodd" d="M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z" clip-rule="evenodd" />
          </svg>
          <span class="text-gray-700 leading-relaxed">{item}</span>
        </div>
      ))}
    </div>
  </div>

  <!-- Course Content Grid -->
  <div class="grid lg:grid-cols-3 gap-8 mb-8">
    <!-- Requirements -->
    <div class="lg:col-span-1 bg-white border border-gray-200 rounded-lg shadow-sm p-6">
      <h3 class="text-lg font-bold text-gray-900 mb-4">Requirements</h3>
      <ul class="space-y-3">
        {requirements.map((req: string) => (
          <li class="flex items-start text-sm">
            <span class="w-1.5 h-1.5 bg-purple-400 rounded-full mt-2 mr-3 flex-shrink-0"></span>
            <span class="text-gray-700 leading-relaxed">{req}</span>
          </li>
        ))}
      </ul>
    </div>

    <!-- Description -->
    <div class="lg:col-span-2 bg-white border border-gray-200 rounded-lg shadow-sm p-6">
      <h3 class="text-lg font-bold text-gray-900 mb-4">Description</h3>
      <div class="prose prose-gray max-w-none">
        <p class="text-gray-700 mb-4 leading-relaxed">{course.description}</p>
        <p class="text-gray-700 leading-relaxed">{courseDescription}</p>
      </div>
    </div>
  </div>

  <!-- Curriculum -->
  <div class="bg-white border border-gray-200 rounded-lg shadow-sm p-8 mb-8">
    <div class="flex items-center justify-between mb-6">
      <h2 class="text-2xl font-bold text-gray-900">Course content</h2>
      <div class="text-sm text-gray-600">
        {curriculum.reduce((total: number, section: any) => total + section.lectures.length, 0)} lectures â€¢ {course.duration}
      </div>
    </div>
    <div class="space-y-3">
      {curriculum.map((section: any) => (
        <details class="group border border-gray-200 rounded-lg overflow-hidden hover:shadow-sm transition-shadow">
          <summary class="flex items-center justify-between p-4 cursor-pointer bg-gray-50 hover:bg-gray-100 transition-colors">
            <div class="flex items-center">
              <svg class="w-5 h-5 text-gray-400 mr-3 group-open:rotate-90 transition-transform" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 5l7 7-7 7" />
              </svg>
              <span class="font-medium text-gray-900">{section.sectionTitle}</span>
            </div>
            <span class="text-gray-500 text-sm">{section.lectures.length} lectures</span>
          </summary>
          <div class="border-t border-gray-100">
            {section.lectures.map((lecture: string) => (
              <div class="flex items-center p-3 hover:bg-gray-25 transition-colors">
                <svg class="w-4 h-4 text-purple-500 mr-3 flex-shrink-0" fill="currentColor" viewBox="0 0 20 20">
                  <path fill-rule="evenodd" d="M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z" clip-rule="evenodd" />
                </svg>
                <span class="text-gray-700 text-sm">{lecture}</span>
              </div>
            ))}
          </div>
        </details>
      ))}
    </div>
  </div>

  <!-- FAQ Section -->
  <div class="bg-white border border-gray-200 rounded-lg shadow-sm p-8 mb-8">
    <h2 class="text-2xl font-bold text-gray-900 mb-6">Frequently Asked Questions</h2>
    <div class="space-y-6">
      <div class="border border-gray-200 rounded-lg">
        <details class="group">
          <summary class="flex items-center justify-between p-4 cursor-pointer hover:bg-gray-50 transition-colors">
            <h3 class="text-lg font-semibold text-gray-900 pr-4">Is the {course.title} course worth it? {course.title} Udemy review</h3>
            <svg class="w-5 h-5 text-gray-400 group-open:rotate-180 transition-transform flex-shrink-0" fill="none" stroke="currentColor" viewBox="0 0 24 24">
              <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 9l-7 7-7-7" />
            </svg>
          </summary>
          <div class="px-4 pb-4">
            <p class="text-gray-700 leading-relaxed">Yes! This {course.category} course has excellent ratings ({course.rating} stars from {course.students.toLocaleString()} students) and covers essential skills with lifetime access. The {course.discount} discount makes it an exceptional value. Get {course.title} Udemy coupon for the best deal on this highly-rated {course.category} certification course.</p>
          </div>
        </details>
      </div>

      <div class="border border-gray-200 rounded-lg">
        <details class="group">
          <summary class="flex items-center justify-between p-4 cursor-pointer hover:bg-gray-50 transition-colors">
            <h3 class="text-lg font-semibold text-gray-900 pr-4">Do I need prior experience to take this course?</h3>
            <svg class="w-5 h-5 text-gray-400 group-open:rotate-180 transition-transform flex-shrink-0" fill="none" stroke="currentColor" viewBox="0 0 24 24">
              <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 9l-7 7-7-7" />
            </svg>
          </summary>
          <div class="px-4 pb-4">
            <p class="text-gray-700 leading-relaxed">This course is designed for {course.level.toLowerCase()} level students. {course.level === 'Beginner' ? 'No prior experience required - perfect for complete beginners.' : 'Some basic knowledge in ' + course.category.toLowerCase() + ' is recommended but not mandatory.'} The instructor explains concepts clearly from the ground up.</p>
          </div>
        </details>
      </div>

      <div class="border border-gray-200 rounded-lg">
        <details class="group">
          <summary class="flex items-center justify-between p-4 cursor-pointer hover:bg-gray-50 transition-colors">
            <h3 class="text-lg font-semibold text-gray-900 pr-4">Is there a certificate upon completion?</h3>
            <svg class="w-5 h-5 text-gray-400 group-open:rotate-180 transition-transform flex-shrink-0" fill="none" stroke="currentColor" viewBox="0 0 24 24">
              <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 9l-7 7-7-7" />
            </svg>
          </summary>
          <div class="px-4 pb-4">
            <p class="text-gray-700 leading-relaxed">Yes, Udemy provides a certificate of completion that you can add to your LinkedIn profile, resume, or portfolio upon finishing all course lectures and assignments. This industry-recognized certificate demonstrates your proficiency in {course.category.toLowerCase()}.</p>
          </div>
        </details>
      </div>

      <div class="border border-gray-200 rounded-lg">
        <details class="group">
          <summary class="flex items-center justify-between p-4 cursor-pointer hover:bg-gray-50 transition-colors">
            <h3 class="text-lg font-semibold text-gray-900 pr-4">How long do I have access to this course?</h3>
            <svg class="w-5 h-5 text-gray-400 group-open:rotate-180 transition-transform flex-shrink-0" fill="none" stroke="currentColor" viewBox="0 0 24 24">
              <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 9l-7 7-7-7" />
            </svg>
          </summary>
          <div class="px-4 pb-4">
            <p class="text-gray-700 leading-relaxed">You have lifetime access to this course! Once enrolled, you can learn at your own pace and revisit the material anytime. No expiration dates or hidden fees - your enrollment is permanent.</p>
          </div>
        </details>
      </div>

      <div class="border border-gray-200 rounded-lg">
        <details class="group">
          <summary class="flex items-center justify-between p-4 cursor-pointer hover:bg-gray-50 transition-colors">
            <h3 class="text-lg font-semibold text-gray-900 pr-4">What will I learn in {course.title}? {extractKeySkill(course.description)} course content</h3>
            <svg class="w-5 h-5 text-gray-400 group-open:rotate-180 transition-transform flex-shrink-0" fill="none" stroke="currentColor" viewBox="0 0 24 24">
              <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 9l-7 7-7-7" />
            </svg>
          </summary>
          <div class="px-4 pb-4">
            <p class="text-gray-700 leading-relaxed">{course.title} teaches you {extractKeySkill(course.description)} through {course.totalLectures} comprehensive lectures. You'll master practical skills with hands-on projects and real-world applications. Perfect for {course.level.toLowerCase()} level students looking to advance their {course.category} career.</p>
          </div>
        </details>
      </div>

      <div class="border border-gray-200 rounded-lg">
        <details class="group">
          <summary class="flex items-center justify-between p-4 cursor-pointer hover:bg-gray-50 transition-colors">
            <h3 class="text-lg font-semibold text-gray-900 pr-4">{course.title} instructor - who teaches this course?</h3>
            <svg class="w-5 h-5 text-gray-400 group-open:rotate-180 transition-transform flex-shrink-0" fill="none" stroke="currentColor" viewBox="0 0 24 24">
              <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 9l-7 7-7-7" />
            </svg>
          </summary>
          <div class="px-4 pb-4">
            <p class="text-gray-700 leading-relaxed">{course.title} is taught by {course.instructor}, an experienced professional with expertise in {course.category}. With {course.students.toLocaleString()}+ students enrolled and excellent {course.rating}â­ ratings, this instructor provides high-quality education and ongoing support throughout the course.</p>
          </div>
        </details>
      </div>
    </div>
  </div>

  <!-- Reviews/Testimonials -->
  <div class="bg-gradient-to-br from-purple-50 to-white border border-purple-200 rounded-lg shadow-sm p-8 mb-8">
    <div class="flex items-center justify-between mb-6">
      <h2 class="text-2xl font-bold text-purple-900">Reviews</h2>
      <div class="flex items-center space-x-4">
        <div class="flex items-center">
          <div class="flex mr-2">
            {[...Array(5)].map((_, i) => (
              <span class={`text-sm ${i < Math.floor(parseFloat(String(course.rating))) ? 'text-yellow-400' : 'text-gray-300'}`}>â˜…</span>
            ))}
          </div>
          <span class="text-lg font-bold text-purple-900">{course.rating}</span>
          <span class="text-purple-600 ml-1">course rating â€¢ {course.students.toLocaleString()} ratings</span>
        </div>
      </div>
    </div>
    <div class="grid md:grid-cols-2 gap-6">
      {sampleTestimonials.map((testimonial: any) => (
        <div class="bg-white rounded-lg p-4 border border-purple-100">
          <div class="flex items-center mb-3">
            <div class="flex mr-2">
              {[...Array(5)].map((_, i) => (
                <span class={`text-sm ${i < testimonial.rating ? 'text-yellow-400' : 'text-gray-300'}`}>â˜…</span>
              ))}
            </div>
            <span class="text-purple-900 font-medium">{testimonial.name}</span>
          </div>
          <p class="text-purple-700 text-sm leading-relaxed">"{testimonial.text}"</p>
        </div>
      ))}
    </div>
  </div>

  <!-- Similar Courses -->
  {similarCourses.length > 0 && (
    <div class="mb-8">
      <h2 class="text-2xl font-bold text-gray-900 mb-6">More {extractKeySkill(course.description)} Courses - Students Also Bought</h2>
      <div class="grid md:grid-cols-3 gap-6">
        {similarCourses.map((similar) => (
          <a
            href={`/coupon/${similar.slug}`}
            class="block bg-white border border-gray-200 rounded-lg shadow-sm hover:shadow-lg transition-all duration-200 overflow-hidden group"
          >
            <div class="relative">
              <img
                src={similar.image}
                alt={`${similar.title} - ${extractKeySkill(similar.description)} Udemy course with ${similar.discount} off`}
                class="w-full h-40 object-cover group-hover:scale-105 transition-transform duration-200"
                loading="lazy"
              />
              <div class="absolute top-2 right-2 bg-red-500 text-white text-xs px-2 py-1 rounded">
                {similar.discount}
              </div>
            </div>
            <div class="p-4">
              <h3 class="font-semibold text-gray-900 mb-2 line-clamp-2 text-sm leading-tight hover:text-purple-700 transition-colors">{similar.title}</h3>
              <p class="text-xs text-gray-500 mb-2">{similar.instructor}</p>
              <div class="flex items-center mb-2">
                <span class="text-yellow-400 text-sm mr-1">â˜…</span>
                <span class="text-xs font-medium text-gray-900">{similar.rating}</span>
              </div>
              <div class="flex items-center justify-between">
                <span class="text-lg font-bold text-purple-600">{similar.price}</span>
                <span class="text-xs text-gray-500 line-through">{similar.originalPrice}</span>
              </div>
            </div>
          </a>
        ))}
      </div>
    </div>
  )}
</Layout>