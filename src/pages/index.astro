---
import MainLayout from '../layouts/MainLayout.astro';
import HeroSection from '../components/HeroSection.astro';
import FeaturedCourses from '../components/FeaturedCourses.astro';
import PopularTopics from '../components/PopularTopics.astro';
import CourseOfTheDay from '../components/CourseOfTheDay.astro';
import UdemyPromo from '../components/UdemyPromo.astro';
import PlatformSection from '../components/PlatformSection.astro';
import CategoryList from '../components/CategoryList.astro';
import SeoContent from '../components/SeoContent.astro';
import coupons from '../data/coupons.json';

// Get current date for dynamic content
const now = new Date();
const currentMonth = now.toLocaleDateString('en-US', { month: 'long' });
const currentYear = now.getFullYear();
const totalCoupons = coupons.length;
const lastUpdated = now.toISOString().split('T')[0]; // YYYY-MM-DD format

// Enhanced structured data for homepage
const structuredData = {
  "@context": "https://schema.org",
  "@type": "WebSite",
  name: "Courses Wyn",
  description: "Find the best Udemy courses with verified coupons and reviews",
  url: "https://courseswyn.com",
  potentialAction: {
    "@type": "SearchAction",
    target: "https://courseswyn.com/search?q={search_term_string}",
    "query-input": "required name=search_term_string"
  },
  publisher: {
    "@type": "Organization",
    name: "CoursesWyn",
    logo: {
      "@type": "ImageObject",
      url: "https://courseswyn.com/logo.png"
    }
  }
};

---

<MainLayout
  title={`Best Udemy Courses with ${totalCoupons} Verified Coupons - ${currentMonth} ${currentYear} | Courses Wyn`}
  description={`Discover the best Udemy courses with ${totalCoupons} verified coupons updated ${lastUpdated}. Save up to 90% on premium courses with expert reviews and ratings.`}
  canonical="https://courseswyn.com/"
  structuredData={structuredData}
>
  <HeroSection />
  <PlatformSection />
  <UdemyPromo />
  <FeaturedCourses />
  <CourseOfTheDay />
  <PopularTopics />
  <CategoryList />
  <SeoContent />
</MainLayout>
