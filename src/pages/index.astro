---
import MainLayout from '../layouts/MainLayout.astro';
import HeroSection from '../components/HeroSection.astro';
import FeaturedCourses from '../components/FeaturedCourses.astro';
import PopularTopics from '../components/PopularTopics.astro';
import CourseOfTheDay from '../components/CourseOfTheDay.astro';
import UdemyPromo from '../components/UdemyPromo.astro';
import PlatformSection from '../components/PlatformSection.astro';
import CategoryList from '../components/CategoryList.astro';
import SeoContent from '../components/SeoContent.astro';
import coupons from '../data/coupons.json';

// Get current date for dynamic content
const now = new Date();
const currentMonth = now.toLocaleDateString('en-US', { month: 'long' });
const currentYear = now.getFullYear();
const totalCoupons = coupons.length;
const lastUpdated = now.toISOString().split('T')[0]; // YYYY-MM-DD format

// Enhanced structured data for homepage
const homepageSchema = {
  "@context": "https://schema.org",
  "@graph": [
    {
      "@type": "WebSite",
      name: "CoursesWyn",
      url: "https://courseswyn.com",
      description: "The #1 source for verified Udemy coupons and free online courses.",
      potentialAction: {
        "@type": "SearchAction",
        target: "https://courseswyn.com/search?q={search_term_string}",
        "query-input": "required name=search_term_string"
      }
    },
    {
      "@type": "FAQPage",
      "mainEntity": [
        {
          "@type": "Question",
          "name": "How do I redeem a Udemy coupon?",
          "acceptedAnswer": {
            "@type": "Answer",
            "text": "Simply find a course you like on CoursesWyn, click the 'Redeem' button, and you will be redirected to Udemy. The coupon code will be automatically applied at checkout."
          }
        },
        {
          "@type": "Question",
          "name": "Are these free courses legitimate?",
          "acceptedAnswer": {
            "@type": "Answer",
            "text": "Yes! Instructors generate these 100% OFF coupons to promote their new courses. It is a legitimate way to get premium education for free."
          }
        }
      ]
    }
  ]
};

// SEO-optimized title and description (Unique & Powerful)
const pageTitle = `100% OFF Udemy Coupons & Daily Free Courses ${currentYear} | CoursesWyn`;
const pageDescription = `Unlock premium education for free. CoursesWyn provides ${totalCoupons}+ verified 100% OFF Udemy coupons daily. Master Python, React, Business, and more with free certification courses.`;
const ogTitle = "Unlock Premium Knowledge: 100% Free Udemy Courses & Coupons";
const ogDescription = "Stop paying for online courses. Get lifetime access to top-rated Udemy courses for FREE with our daily verified coupons.";
---

<MainLayout 
  title={pageTitle}
  description={pageDescription}
  ogTitle={ogTitle}
  ogDescription={ogDescription}
  canonical="https://courseswyn.com/"
  structuredData={homepageSchema}
>

  <!-- Section 1: Hero -->
  <HeroSection />

  <!-- Section 2: Platform / Trusted By -->
  <PlatformSection />

  <!-- Section 3: Udemy Personal Plan Promo -->
  <UdemyPromo />

  <!-- Section 4: Featured Courses -->
  <FeaturedCourses />

  <!-- Section 5: Course of the Day -->
  <CourseOfTheDay />

  <!-- Section 6: Popular Topics -->
  <PopularTopics />

  <!-- Section 7: Categories -->
  <CategoryList />

  <!-- Section 8: SEO Silo Content (FAQs & About) -->
  <SeoContent />

</MainLayout>



